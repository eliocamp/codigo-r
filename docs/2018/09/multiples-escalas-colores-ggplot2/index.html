

  
    
  


  




  


  

<!DOCTYPE html>
<html lang="es-es">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.54.0 with theme Tranquilpeak 0.4.3-BETA">
    <title>M√∫ltiples escalas de colores en ggplot2</title>
    <meta name="author" content="Elio Campitelli">
    <meta name="keywords" content=", R">

    <link rel="icon" href="../../../favicon.png">
    

    
    <meta name="description" content="tl;dr: Esta funcionalidad est√° ahora en el paquete ggnewscale! üì¶ En este gist est√° la versi√≥n origial del c√≥digo.
Un dolor importante para algunos usuarios de ggplot2 es la imposibilidad de usar m√°s de una escala para cada tipo de par√°metro est√©tico. Una b√∫squeda en StackOverflow da como resultado m√∫ltiples preguntas:

Pero ninguna respuesta tiene una soluci√≥n realmente satisfactoria; la mayor√≠a son del tipo &ldquo;no se puede, pero esta es otra forma de graficar tus datos&rdquo;.">
    <meta property="og:description" content="tl;dr: Esta funcionalidad est√° ahora en el paquete ggnewscale! üì¶ En este gist est√° la versi√≥n origial del c√≥digo.
Un dolor importante para algunos usuarios de ggplot2 es la imposibilidad de usar m√°s de una escala para cada tipo de par√°metro est√©tico. Una b√∫squeda en StackOverflow da como resultado m√∫ltiples preguntas:

Pero ninguna respuesta tiene una soluci√≥n realmente satisfactoria; la mayor√≠a son del tipo &ldquo;no se puede, pero esta es otra forma de graficar tus datos&rdquo;.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="M√∫ltiples escalas de colores en ggplot2">
    <meta property="og:url" content="/2018/09/multiples-escalas-colores-ggplot2/">
    <meta property="og:site_name" content="C√≥digo R">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="C√≥digo R">
    <meta name="twitter:description" content="tl;dr: Esta funcionalidad est√° ahora en el paquete ggnewscale! üì¶ En este gist est√° la versi√≥n origial del c√≥digo.
Un dolor importante para algunos usuarios de ggplot2 es la imposibilidad de usar m√°s de una escala para cada tipo de par√°metro est√©tico. Una b√∫squeda en StackOverflow da como resultado m√∫ltiples preguntas:

Pero ninguna respuesta tiene una soluci√≥n realmente satisfactoria; la mayor√≠a son del tipo &ldquo;no se puede, pero esta es otra forma de graficar tus datos&rdquo;.">
    
      <meta name="twitter:creator" content="@d_olivaw">
    
    

    
    

    
      <meta property="og:image" content="//www.gravatar.com/avatar/2376976935665241d1fd5a1fb8124a81?s=640">
    

    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="../../../css/style-jsjn0006wyhpyzivf6yceb31gvpjatbcs3qzjvlumobfnugccvobqwxnnaj8.min.css" />
    
    
      
        <link rel="stylesheet"  href="https://eliocamp.github.io/codigo-r/css/custom.css">
      
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="2">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="../../../">C√≥digo R</a>
  </div>
  
    
      <a class="header-right-picture "
         href="../../../#about">
    
    
    
      
        <img class="header-picture" src="//www.gravatar.com/avatar/2376976935665241d1fd5a1fb8124a81?s=90" alt="Foto de autor" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="2">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="../../../#about">
          <img class="sidebar-profile-picture" src="//www.gravatar.com/avatar/2376976935665241d1fd5a1fb8124a81?s=110" alt="Foto de autor" />
        </a>
        <h4 class="sidebar-profile-name">Elio Campitelli</h4>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Inicio</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categor√≠as</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archivos</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">Acerca de</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/eliocamp" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.r-bloggers.com/" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">R-Bloggers</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://twitter.com/d_olivaw" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="2"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      M√∫ltiples escalas de colores en ggplot2
    </h1>
  
  

    
        In English: <a href="https://eliocamp.github.io/codigo-r/en/2018/09/multiple-color-fill-scales-ggplot2/">Multiple color (and fill) scales with ggplot2</a>
    


  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2018-09-17T00:00:00Z">
        
  Septiembre 17, 2018

      </time>
    
    
  
  
    <span>en</span>
    
      <a class="category-link" href="../../../categories/r">R</a>
    
  

  </div>

</div>



<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    });
    </script>
    <script type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              

<p>tl;dr: Esta funcionalidad est√° ahora en el paquete <a href="https://github.com/eliocamp/ggnewscale"><code>ggnewscale</code></a>! üì¶
En <a href="https://gist.github.com/eliocamp/eabafab2825779b88905954d84c82b32">este gist</a> est√° la versi√≥n origial del c√≥digo.</p>

<p>Un dolor importante para algunos usuarios de <code>ggplot2</code> es la imposibilidad de usar m√°s de una escala para cada tipo de par√°metro est√©tico. Una b√∫squeda en StackOverflow da como resultado m√∫ltiples preguntas:</p>

<p><a href="https://stackoverflow.com/search?q=ggplot2+two+color+scales"><img src="../../../images/ggplo2_twoscales_so_small.jpg" alt="preguntas stack overflow" /></a></p>

<p>Pero ninguna respuesta tiene una soluci√≥n realmente satisfactoria; la mayor√≠a son del tipo &ldquo;no se puede, pero esta es otra forma de graficar tus datos&rdquo;.</p>

<p>Tener varias escalas distintas para el mismo par√°metro est√©tico tiene riesgos, pero tambi√©n beneficios. Cuando las escalas son bien distintas, permiten condensar m√°s informaci√≥n en un mismo gr√°fico, facilitando la visualizaci√≥n de interacciones entre distintas variables. En ciencias de la atm√≥sfera, por ejemplo, es muy habitual graficar temperatura y presi√≥n con l√≠neas de contorno usando distintas escalas de colores.</p>

<p>Recientemente, gracias a <a href="https://github.com/tidyverse/ggplot2/pull/2555">un aporte</a> de Claus Wilke, <code>ggplot2</code> permite usar &ldquo;par√°metros est√©ticos no est√°ndar&rdquo;. Por ejemplo, se puede hacer <code>scale_color_continuous(aesthetics = &quot;fill&quot;)</code> para especificar la escala del <code>fill</code>. Esto, junto con el uso de <code>ggplot_add()</code> para &ldquo;sumarle&rdquo; cualquier elemento a un objecto de ggplot2 (gracias a Hiroaki Yutani por <a href="https://yutani.rbind.io/post/2017-11-07-ggplot-add">su post</a>!), permite hacer algunas triqui√±uelas para agregar m√∫ltiples escalas de color (o fill, o lo que sea).</p>

<p>D√©jenme ilustrar con un ejemplo sacado de <a href="https://stackoverflow.com/questions/16129876/ggplot2-multiple-scales-legends-per-aesthetic-revisited">esta pregunta</a> de StackOverflow:</p>

<pre><code class="language-r">ggplot(pd[pd$score1 != 0,], aes(x=x, y=species)) +
   geom_tile(aes(fill  =score1)) +
   scale_fill_gradient2(&quot;Score 1&quot;, limits = c(0, 4), 
                        low = &quot;#762A83&quot;, mid = &quot;white&quot;, high = &quot;#1B7837&quot;) +
   
   new_scale(&quot;fill&quot;) +
   
   geom_tile(aes(fill = score2), data = subset(pd, score2 != 0)) +
   scale_fill_gradient2(&quot;Score 2&quot;, limits = c(0, 3), 
                        low = &quot;#1B7837&quot;, mid = &quot;white&quot;, high = &quot;#762A83&quot;) +
   
   geom_text(data=pd, aes(label = letters, color = factor(change))) +
   scale_color_manual(&quot;Change&quot;, values = c(&quot;black&quot;, &quot;#F2A11F&quot;), 
                      labels = c(&quot;None&quot;, &quot;Some&quot;)) +
     coord_fixed(ratio = 1.5, xlim=c(0.5,16.5), ylim=c(0.5, 3.5)) 
</code></pre>

<p><img src="../../../post/2018-09-17-multiples-escalas-de-colores-en-ggplot2_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>

<h2 id="c√≥mo-funciona">C√≥mo funciona</h2>

<p>El c√≥digo es un tanto largo y tedioso para ponerlo en un art√≠culo (pueden encontrarlo en <a href="https://gist.github.com/eliocamp/eabafab2825779b88905954d84c82b32">este gist</a>) as√≠ que ac√° voy a hablar de la parte m√°s importante.</p>

<p>Primero, la funci√≥n <code>new_scale()</code> no hace nada. S√≥lo crea un objeto de clase <code>new_aes</code> que no es m√°s que un vector de texto con las escalas &ldquo;nuevas&rdquo;.</p>

<pre><code class="language-r">new_scale &lt;- function(new_aes) {
  structure(ggplot2::standardise_aes_names(new_aes), class = &quot;new_aes&quot;)
}
</code></pre>

<p>La magia est√° en el <code>+</code>. Al sumar objectos de ggplot, se usa la funci√≥n gen√©rica <code>ggplot_add()</code>. Este es el m√©todo para los objectos de clase <code>new_aes</code>.</p>

<pre><code class="language-r">ggplot_add.new_aes &lt;- function(object, plot, object_name) {
  plot$layers &lt;- lapply(plot$layers, bump_aes, new_aes = object)
  plot$scales$scales &lt;- lapply(plot$scales$scales, bump_aes, new_aes = object)
  plot$labels &lt;- bump_aes(plot$labels, new_aes = object)
  plot
}
</code></pre>

<p>Lo que hace es agarrar cada capa, escala y etiqueta y cambiarle el nombre de los par√°metros est√©ticos; efectivamente les agrega la palabra &ldquo;_new&rdquo; de manera que el &ldquo;color&rdquo; pasa a ser &ldquo;color_new&rdquo;. Hay que hacer un poco de cirug√≠a interna m√≠nimamente invasiva (la laparoscop√≠a de la programaci√≥n) para que los geoms no se vuelvan locos al recibir un data frame con una columna llamada &ldquo;color_new&rdquo; en vez de &ldquo;color&rdquo;.</p>

<p>Hay varias formas de hacer lo mismo y podr√°n ver que el proyecto pas√≥ por <a href="https://twitter.com/d_olivaw/status/1040722632675610626">varias iteraciones</a>. Todav√≠a no estoy 100% de que esta forma sea totalmente amigable y ser√≠a genial recibir un poco de feedback de la comunidad ü§û.</p>

<h2 id="ejemplo-real">Ejemplo real</h2>

<p>¬øPara qu√© sirve todo esto en definitiva? Bueno, como dec√≠a antes, una posibilidad es la de graficar temperatura y presi√≥n en un mismo mapa usando dos escalas distintas.</p>

<pre><code class="language-r">library(metR)
library(magrittr)
time &lt;- &quot;1998-01-01&quot;
# Temperatura y presi√≥n a nivel del mar para el 1¬∞ de enero de 1998
atmos &lt;- ReadNetCDF(&quot;~/DATOS/NCEP Reanalysis/air.mon.mean.nc&quot;, 
                          subset = list(level = 850, 
                                        time = time)) %&gt;% 
   .[, slp:= ReadNetCDF(&quot;~/DATOS/NCEP Reanalysis/slp.mon.mean.nc&quot;, 
                  subset = list(time = time), out = &quot;vector&quot;)] %&gt;% 
   .[, lon := ConvertLongitude(lon)]

ggplot(atmos, aes(lon, lat)) +
   geom_world() +
   geom_contour(aes(z = slp, color = ..level..), binwidth = 4) +
   scale_color_viridis_c(&quot;Presi√≥n a nivel del mar&quot;) +
   
   new_scale_color() +   # lo mismo que `new_scale(&quot;color&quot;)`
   
   geom_contour(aes(z = air, color = ..level..), binwidth = 4) +
   scale_color_distiller(&quot;Temperatura del aire&quot;, palette = &quot;Spectral&quot;)  +
   
   scale_x_longitude(limits = c(-150, 0)) +
   scale_y_latitude(ticks = 15) +
   ggalt::coord_proj(&quot;+proj=moll +lon_0=-75&quot;, 
                     ylim = c(-60, 0), xlim = c(-150, 0))
</code></pre>

<p><img src="../../../post/2018-09-17-multiples-escalas-de-colores-en-ggplot2_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>

<p>Observar la relaci√≥n entre la presi√≥n y la temperatura permite analizar procesos del crecimiento de las perturbaciones de la atm√≥sfera.</p>

<p>Por supuesto, un gran poder conlleva una gran responsabilidad üï∏. Mezclar muchas escalas no es para cualquiera y debe ser usado bien y s√≥lo si es absolutamente necesario. Siempre conviene pensar si no hay una mejor manera de mostrar lo mismo.</p>

<p><code>ggplot2</code> nunca deja de maravillarme. No s√≥lo es un paquete poderos√≠simo para hacer toda clase gr√°ficos de una manera est√∫pidamente simple y amigable, sino que es excepcionalmente extensible permitiendo este tipo de modificaci√≥n por parte de los usuarios. ¬°Larga vida a <code>ggplot2</code> ‚úä!</p>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">ETIQUETADO EN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="../../../tags/ggplot2/">ggplot2</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../2018/09/multiple-color-and-fill-scales-with-ggplot2/" data-tooltip="Multiple color (and fill) scales with ggplot2">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">SIGUIENTE</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../2018/08/periodic-data-ggplot2-ggperiodic/" data-tooltip="Wrapping around ggplot2 with ggperiodic">
              
                  <span class="hide-xs hide-sm text-small icon-mr">ANTERIOR</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://eliocamp.github.io/codigo-r/2018/09/multiples-escalas-colores-ggplot2/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://eliocamp.github.io/codigo-r/2018/09/multiples-escalas-colores-ggplot2/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://eliocamp.github.io/codigo-r/2018/09/multiples-escalas-colores-ggplot2/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2019 Elio Campitelli. Todos los derechos reservados
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="2">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../2018/09/multiple-color-and-fill-scales-with-ggplot2/" data-tooltip="Multiple color (and fill) scales with ggplot2">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">SIGUIENTE</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../2018/08/periodic-data-ggplot2-ggperiodic/" data-tooltip="Wrapping around ggplot2 with ggperiodic">
              
                  <span class="hide-xs hide-sm text-small icon-mr">ANTERIOR</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://eliocamp.github.io/codigo-r/2018/09/multiples-escalas-colores-ggplot2/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://eliocamp.github.io/codigo-r/2018/09/multiples-escalas-colores-ggplot2/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://eliocamp.github.io/codigo-r/2018/09/multiples-escalas-colores-ggplot2/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="2">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Feliocamp.github.io%2Fcodigo-r%2F2018%2F09%2Fmultiples-escalas-colores-ggplot2%2F">
          <i class="fa fa-facebook-official"></i><span>Compartir en Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https%3A%2F%2Feliocamp.github.io%2Fcodigo-r%2F2018%2F09%2Fmultiples-escalas-colores-ggplot2%2F">
          <i class="fa fa-twitter"></i><span>Compartir en Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https%3A%2F%2Feliocamp.github.io%2Fcodigo-r%2F2018%2F09%2Fmultiples-escalas-colores-ggplot2%2F">
          <i class="fa fa-google-plus"></i><span>Compartir en Google&#43;</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="//www.gravatar.com/avatar/2376976935665241d1fd5a1fb8124a81?s=110" alt="Foto de autor" />
    
    <h4 id="about-card-name">Elio Campitelli</h4>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Atmospheric sciences graduate researcher at CONICET
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Argentina
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="Buscar" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center">no se encontraron art√≠culos</div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://eliocamp.github.io/codigo-r/2019/04/ecmwfr-calentamiento-global/">
                <h3 class="media-heading">Midiendo el calentamiento global con ecmwfr</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Para mi investigaci√≥n necesitaba bajar datos meteorol√≥gicos grillados del ERA-Interim, que es una base de datos generada por el ECMWF. Bajar los datos en su sitio web es muy inc√≥mido y requiere muchos clicks. Por suerte, me encontr√© con el paquete ecmwfr con el que pude bajar los datos directamente desde R y muy f√°cilmente. Una de las cosas geniales del c√≥digo abierto, es que los usuarios pueden ser colaboradores, as√≠ que suger√≠ algunas cosas y aport√© un poco de c√≥digo.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://eliocamp.github.io/codigo-r/2019/01/metamerismo-estad%C3%ADstico/">
                <h3 class="media-heading">Metamerismo estad√≠stico</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jan 1, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Resumen El paquete metamer implementa en R el algoritmo descripto por Matejka and Fitzmaurice (2017) para generar sets de datos distintos entre s√≠ pero con estad√≠sticos id√©nticos. Adem√°s, propongo el nombre ‚Äúmet√°meros‚Äù para estos grupos de datos en analog√≠a con el concepto proveniente de colorimetr√≠a.
Met√°meros en la visi√≥n Esto no es un prisma separando la luz blanca en las longitudes de onda que la componen. Es una imagen de un prisma separando la luz blanca en las longitudes de onda que la componen.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://eliocamp.github.io/codigo-r/2018/10/leyendo-informacion-incucai/">
                <h3 class="media-heading">Leyendo informaci√≥n del INCUCAI</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">El otro d√≠a el diario Clar√≠n sac√≥ una nota afirmando que el pasado agosto se hab√≠a dado el r√©cord hist√≥rico de transplantes de √≥rganos y se lo adjudicaba a la &ldquo;Ley Justina&rdquo;, que establece que todos somos donantes presuntos a menos que se declare lo contrario en vida. Dado que esta ley se aprob√≥ hace poco m√°s de un mes y todav√≠a no est√° reglamentada, es poco probable que este r√©cord se deba al cambio legal.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://eliocamp.github.io/codigo-r/2018/09/multiple-color-and-fill-scales-with-ggplot2/">
                <h3 class="media-heading">Multiple color (and fill) scales with ggplot2</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">(Versi√≥n en espa√±ol)
tl;dr: The functionality shown in this post is now on the ggnewscale package! üì¶. You can find the original code in this gist.
A somewhat common annoyance for some ggplot2 users is the lack of support for multiple colour and fill scales. Perusing StackOverflow you can find many questions relating to this issue:

Unfortunately, this deluge of questions is met with a shortage of conclusive answers, most of them being some variation of &ldquo;you can&rsquo;t, but here&rsquo;s how to hack it or visualise the data differently&rdquo;.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://eliocamp.github.io/codigo-r/2018/09/multiples-escalas-colores-ggplot2/">
                <h3 class="media-heading">M√∫ltiples escalas de colores en ggplot2</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">tl;dr: Esta funcionalidad est√° ahora en el paquete ggnewscale! üì¶ En este gist est√° la versi√≥n origial del c√≥digo.
Un dolor importante para algunos usuarios de ggplot2 es la imposibilidad de usar m√°s de una escala para cada tipo de par√°metro est√©tico. Una b√∫squeda en StackOverflow da como resultado m√∫ltiples preguntas:

Pero ninguna respuesta tiene una soluci√≥n realmente satisfactoria; la mayor√≠a son del tipo &ldquo;no se puede, pero esta es otra forma de graficar tus datos&rdquo;.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://eliocamp.github.io/codigo-r/2018/08/periodic-data-ggplot2-ggperiodic/">
                <h3 class="media-heading">Wrapping around ggplot2 with ggperiodic</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Aug 8, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">As an atmospheric scientists, a lot of my research consists on plotting and looking at global fields of atmospheric variables like pressure, temperature and the like. Since our planet is a sphere (well, almost), it is unbound and so longitude is a periodic dimension. That is, to the right of 180¬∞E you go back to 180¬∞W. But ggplot2 and other plotting systems, for the most part, assume linear dimensions.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://eliocamp.github.io/codigo-r/2018/06/tu-propio-geom-smooth/">
                <h3 class="media-heading">Tu propio smooth en geom_smooth()</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jun 6, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Algo incre√≠blemente satisfactorio de ggplot2 es la posibilidad de ajustar curvas a los datos de manera s√∫per f√°cil con geom_smooth(). Para mi investigaci√≥n estaba mirando la relaci√≥n entre dos √°ngulos y me di cuenta que la recta ajustada por cuadrados m√≠nimos no estaba funcionando para ilustrar la obvia estructura que hab√≠a en los datos.
library(ggplot2) df &lt;- readRDS(&quot;data/smooth_example.Rds&quot;) ggplot(df, aes(pc.angle, phase)) + geom_point() + geom_smooth(method = &quot;lm&quot;)  Se me ocurri√≥ que un mejor modelo podr√≠a ser usando el estimador de Theil-Sen, que es la mediana de todas las pendientes entre dos puntos distintos y est√° implementado en el paquete mblm.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://eliocamp.github.io/codigo-r/2018/05/presentacion-powerpoint-rmarkdown/">
                <h3 class="media-heading">Hacer una presentaci√≥n de PowerPoint a partir de rmarkdown</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">La interfaz entre usuarios de knitr/markdown y word/powerpoint no deja de ser √°spera ya que es dif√≠cil cambiar el workflow propio para acomodar el de otras personas. En particular, es muy com√∫n tener que colaborar con personas que se sienten mucho m√°s c√≥modas trabajando con presentaciones en PowerPoint que en las creadas con beamer o ioslides. Una forma de reducir la fricci√≥n ser√≠a la de generar un ppt autom√°ticamente a partir de una archivo de markdown.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://eliocamp.github.io/codigo-r/2018/05/arte-reproducible-del-subte-de-buenos-aires/">
                <h3 class="media-heading">Arte reproducible del Subte de Buenos Aires</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">El s√°bado pasado est√°bamos en el subte con mi novia y pasamos por la estaci√≥n √Ångel Gallardo de la L√≠nea B y notamos que ten√≠a unas ilustraciones en las paredes hechas a partir de l√≠neas de distinto grosor.
Charlamos un poco sobre ese estilo y c√≥mo se pod√≠a replicar con ggplot2 usando el paquete ggridges.
Lo primero que hago es leer la imagen. Este paso depende del formato (a menos que haya alguna forma de seleccionar el formato correcto autom√°ticamente, pero no conozco).</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://eliocamp.github.io/codigo-r/2018/05/como-hacer-un-stat-generico-en-ggplot2/">
                <h3 class="media-heading">Como hacer un stat gen√©rico en ggplot2</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Hace un tiempo que ven√≠a pensando que si bien ggplot2 es genial y tiene un mont√≥n de geoms y stats, le faltaba la opci√≥n de extenderlo a stats y geoms creados por el usuario. Luego, aprend√≠ que ggplot2 tiene un excelente sistema para extenderlo y empec√© a crear mis propios stats. Pero a√∫n as√≠, hacer un stat espec√≠fico cada vez que uno quiere hacer un plot en particular es demasiado complicado.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero="no se encontraron art√≠culos"
         data-message-one="1 art√≠culo encontrado"
         data-message-other="{n} art√≠culos encontrados">
         15 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('https://eliocamp.github.io/codigo-r/images/cover2.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js" integrity="sha256-XrZQp+ZMfovqr6Hb2M6okHvSEYaB/+Xbx7toWmOOZUM=" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-light.min.css" integrity="sha256-KacbO6Nou2geGJEUzQeKzKEdp/DENVGJKAd2v37moh0=" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="../../../js/script-qi9wbxp2ya2j6p7wx1i6tgavftewndznf4v0hy2gvivk1rxgc3lm7njqb6bz.min.js"></script>



<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
      <script>
        var disqus_config = function () {
          this.page.url = 'https:\/\/eliocamp.github.io\/codigo-r\/2018\/09\/multiples-escalas-colores-ggplot2\/';
          
            this.page.identifier = '\/2018\/09\/multiples-escalas-colores-ggplot2\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'codigo-r';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  



    
  </body>
</html>

