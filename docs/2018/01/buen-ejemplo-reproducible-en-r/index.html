

  
    
  


  




  


  

<!DOCTYPE html>
<html lang="es-es">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.47.1 with theme Tranquilpeak 0.4.3-BETA">
    <title>C칩mo hacer un buen ejemplo reproducible en R</title>
    <meta name="author" content="Elio Campitelli">
    <meta name="keywords" content=", R">

    <link rel="icon" href="../../../favicon.png">
    

    
    <meta name="description" content="Es muy dif칤cil dar ayuda si no se sabe cu치l es el problema. Un buen ejemplo de lo que est치 mal que cualquiera pueda correr en sus computadoras es casi esencial para recibir ayuda.
Un buen ejemplo reproducible (o reprex) es b치sicamente el feliz matrimonio entre un set de datos m칤nimo y un c칩digo m칤nimo que ilustre el problema y que cualquiera pueda copiar, pegar en un script y obtener exactamente los mismos resultados.">
    <meta property="og:description" content="Es muy dif칤cil dar ayuda si no se sabe cu치l es el problema. Un buen ejemplo de lo que est치 mal que cualquiera pueda correr en sus computadoras es casi esencial para recibir ayuda.
Un buen ejemplo reproducible (o reprex) es b치sicamente el feliz matrimonio entre un set de datos m칤nimo y un c칩digo m칤nimo que ilustre el problema y que cualquiera pueda copiar, pegar en un script y obtener exactamente los mismos resultados.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="C칩mo hacer un buen ejemplo reproducible en R">
    <meta property="og:url" content="/2018/01/buen-ejemplo-reproducible-en-r/">
    <meta property="og:site_name" content="C칩digo R">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="C칩digo R">
    <meta name="twitter:description" content="Es muy dif칤cil dar ayuda si no se sabe cu치l es el problema. Un buen ejemplo de lo que est치 mal que cualquiera pueda correr en sus computadoras es casi esencial para recibir ayuda.
Un buen ejemplo reproducible (o reprex) es b치sicamente el feliz matrimonio entre un set de datos m칤nimo y un c칩digo m칤nimo que ilustre el problema y que cualquiera pueda copiar, pegar en un script y obtener exactamente los mismos resultados.">
    
      <meta name="twitter:creator" content="@d_olivaw">
    
    

    
    

    
      <meta property="og:image" content="//www.gravatar.com/avatar/2376976935665241d1fd5a1fb8124a81?s=640">
    

    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="../../../css/style-jsjn0006wyhpyzivf6yceb31gvpjatbcs3qzjvlumobfnugccvobqwxnnaj8.min.css" />
    
    
      
        <link rel="stylesheet"  href="https://eliocamp.github.io/codigo-r/css/custom.css">
      
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="2">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="../../../">C칩digo R</a>
  </div>
  
    
      <a class="header-right-picture "
         href="../../../#about">
    
    
    
      
        <img class="header-picture" src="//www.gravatar.com/avatar/2376976935665241d1fd5a1fb8124a81?s=90" alt="Foto de autor" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="2">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="../../../#about">
          <img class="sidebar-profile-picture" src="//www.gravatar.com/avatar/2376976935665241d1fd5a1fb8124a81?s=110" alt="Foto de autor" />
        </a>
        <h4 class="sidebar-profile-name">Elio Campitelli</h4>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Inicio</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categor칤as</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archivos</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">Acerca de</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/eliocamp" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://twitter.com/d_olivaw" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="2"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      C칩mo hacer un buen ejemplo reproducible en R
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2018-01-06T00:00:00Z">
        
  
  
  
  
    6 de Enero 2018
  

      </time>
    
    
  
  
    <span>en</span>
    
      <a class="category-link" href="../../../categories/r">R</a>
    
  

  </div>

</div>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    });
    </script>
    <script type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <p>Es muy dif칤cil dar ayuda si no se sabe cu치l es el problema. Un buen ejemplo de lo que est치 mal que cualquiera pueda correr en sus computadoras es casi esencial para recibir ayuda.</p>
<p>Un buen ejemplo reproducible (o reprex) es b치sicamente el feliz matrimonio entre un set de datos <strong>m칤nimo</strong> y un c칩digo <strong>m칤nimo</strong> que ilustre el problema y que cualquiera pueda copiar, pegar en un script y obtener <strong>exactamente los mismos resultados</strong>.</p>
<p>Obtener un reprex m칤nimo no es una tarea trivial. A veces puede tomar m치s de media hora y dar ma콑 de un dolor de cabeza. Pero en el proceso uno aprende mucho sobre las caracter칤sticas espec칤ficas de su problema y a veces incluso termina por resolverlo solo. A칰n si no se resuelve, el tiempo que uno invierte en hacer el ejemplo reproducible implican m치s chances de que alg칰n usuario responda, m치s r치pido y con m치s claridad.</p>
<div id="datos-minimos" class="section level2">
<h2>Datos m칤nimos</h2>
<p>Hay dos formas principales de obtener sets de datos para ejemplos reproducibles, cre치ndolos uno mismo o usando datos que vienen en distintos paquetes. La cantidad de sets de datos a los que cualquier usuario de R puede tener acceso sin salir de casa <a href="http://vincentarelbundock.github.io/Rdatasets/datasets.html">es inmensa</a>. Distintos datos sirven para ilustrar distintos problemas.</p>
<p>Por ejemplo, yo trabajo mucho con datos espaciales en grillas regulares y si quiero probar algo uso mucho el dataset <code>volcano</code>, que tiene informaci칩n topogr치fica del volc치n Maunga Whau en Auckland con una resoluci칩n de 10m. Como es una matriz y en general prefiero trabajar con data.frames, para usarla tengo que usar <code>reshape2::melt()</code></p>
<pre class="r"><code>library(ggplot2)
ggplot(reshape2::melt(volcano), aes(Var1, Var2)) +
   geom_contour(aes(z = value, color = ..level..)) +
   coord_equal()</code></pre>
<p><img src="../../../post/2018-01-06-buen-ejemplo-reproducible_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<p>Para datos m치s puntales, <code>ggplot2</code> tiene el dataset <code>diamonds</code> que contiene m치s de 50.000 filas de datos num칠ricos y factores</p>
<pre class="r"><code>ggplot(diamonds, aes(carat, price)) +
   geom_point(aes(color = clarity)) +
   facet_grid(color ~ cut)</code></pre>
<p><img src="../../../post/2018-01-06-buen-ejemplo-reproducible_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>Y para el que prefiera autos de lujo a anillos de diamantes, est치 <code>mtcars</code>.</p>
<p>Si uno prefiere usar datos ficticios, siempre puede generar n칰meros aleatorios con <code>rnorm</code>, <code>runif</code>, <code>rgamma</code> o cualquier otra distribuci칩n (ver <code>?distributions</code> para una lista). <strong>Siempre</strong> que uno use alguna de estas funciones tiene que setear la semilla del generador de n칰meros aleatorios con <code>set.seed()</code>. De esta forma uno se asegura que todo aquel que ejecute el c칩digo obtenga exactamente los mismos n칰meros (pero aleatorios 游뱂).</p>
<p>Una funci칩n que a m칤 me resolvi칩 much칤simos problemas es <code>expand.grid</code>. Devuelve un data.frame con todas las combinaciones de los elementos de distintos vectores. Es una funci칩n muy flexible que puede ser usada para generar una grilla regular</p>
<pre class="r"><code>df &lt;- expand.grid(x = 1:10, y = 1:10)
df$z &lt;- with(df, x*y)
ggplot(df, aes(x, y)) +
   geom_tile(aes(fill = z))</code></pre>
<p><img src="../../../post/2018-01-06-buen-ejemplo-reproducible_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>o para asignar valores a distintos factores</p>
<pre class="r"><code>library(ggplot2)
df &lt;- expand.grid(tiempo = 1:30, sujeto = factor(letters[1:3]))
set.seed(42)
df$valor &lt;- with(df, tiempo*0.1*as.numeric(sujeto) + rnorm(nrow(df)))
ggplot(df, aes(tiempo, valor, color = sujeto)) +
   geom_line()</code></pre>
<p><img src="../../../post/2018-01-06-buen-ejemplo-reproducible_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>A veces los problemas dependen de los datos utilizados. Si resulta imposible reproducir un problema con datos p칰blicos o artificiales, la 칰ltima opci칩n es compartir los datos propios. En ese caso, lo que uno debe hacer es minimizar los datos para que puedan ser compartidos f치cilmente. Por ejemplo, yo estaba teniendo unos problemas con unos datos de <a href="https://en.wikipedia.org/wiki/Stream_function">funci칩n corriente</a> para distintos modelos clim치ticos y distintas estaciones. Parte de resolverlo implic칩 reducirlo a s칩lo un campo.</p>
<p>Si los datos reducidos quedan bastante chicos, la manera m치s f치cil de compartirlos es con la funci칩n <code>dput</code>, que convierte un objeto de R en un c칩digo que lo reproduce:</p>
<pre class="r"><code>dput(cars)</code></pre>
<pre><code>## structure(list(speed = c(4, 4, 7, 7, 8, 9, 10, 10, 10, 11, 11, 
## 12, 12, 12, 12, 13, 13, 13, 13, 14, 14, 14, 14, 15, 15, 15, 16, 
## 16, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 20, 20, 20, 20, 20, 
## 22, 23, 24, 24, 24, 24, 25), dist = c(2, 10, 4, 22, 16, 10, 18, 
## 26, 34, 17, 28, 14, 20, 24, 28, 26, 34, 34, 46, 26, 36, 60, 80, 
## 20, 26, 54, 32, 40, 32, 40, 50, 42, 56, 76, 84, 36, 46, 68, 32, 
## 48, 52, 56, 64, 66, 54, 70, 92, 93, 120, 85)), .Names = c(&quot;speed&quot;, 
## &quot;dist&quot;), row.names = c(NA, -50L), class = &quot;data.frame&quot;)</code></pre>
<p>Si a칰n reduci칠ndolo al m칤nimo los datos son demasiado grandes o complicados para compartirlos como texto, la mejor opci칩n es guardarlo como un archivo .Rds</p>
<pre class="r"><code>saveRDS(diamonds, file = &quot;diamonds.Rds&quot;)</code></pre>
<p>y luego subir el archivo a alg칰n sitio de intercambio.</p>
<p>En el c칩digo de ejemplo, leer los archivos con</p>
<pre class="r"><code>diamonds &lt;- readRDS(&quot;diamonds.Rds&quot;)</code></pre>
</div>
<div id="codigo-minimo" class="section level2">
<h2>C칩digo m칤nimo</h2>
<p>Una vez que se tiene la menor cantidad de datos que reproducen un problema, lo que sigue es minimizar el c칩digo. A veces puede ser complicado, pero a grandes rasgos son cuestiones obvias.</p>
<p>Cargar la menor cantidad de paquetes posibles. No crear variables innecesariamente. Si es una cuesti칩n con gr치ficos, sacar la mayor cantidad de personalizaci칩n posible (usar las escalas default en <code>ggplot2</code>, por ejemplo).</p>
<p>Personalmente, si el c칩digo original usa sintaxis de <code>dplyr</code> o <code>data.table</code> (mi favorita 游눞), trato de reducir todo a R base. Casi seguro que el problema no est치 ah칤 y no est치 bueno obligar a otros a instalar paquetes nuevos para ayudar.</p>
<p>Todo esto requiere una intuici칩n de d칩nde podr칤a estar el error pero en caso de no tenerla, ayuda a desarrollarla. Ir sacando pedazos de c칩digo y chequeando si el problema continua es una buena forma de encontrar la causa del problema. Como dijo Sherlock:</p>
<blockquote>
<p>Una vez descartado lo imposible, el c칩digo que queda, por improbable que parezca, debe ser la causa del error.</p>
</blockquote>
<p>(o algo as칤)</p>
</div>
<div id="finalmente" class="section level2">
<h2>Finalmente</h2>
<p>Una vez que est치n los datos m칤nimos y el c칩digo m칤nimo, hay que compartir todo eso. Uno de mis paquetes favoritos y que uso constantemente es <a href="https://github.com/tidyverse/reprex"><code>reprex</code></a>. Es un paquete pensado especialmente para hacer desaparecer todas las dificultades de compartir c칩digo y es incre칤blemente f치cil de usar.</p>
<p>Una vez que se tiene el c칩digo escrito, lo 칰nico que hay que hacer es copiarlo todo al portapapeles y correr <code>reprex::reprex()</code> para que lo corra y copie el resultado en el portapapeles. Si hay gr치ficos, los sube autom치ticamente a imgur y genera los tags correctos para que se vean bien. Muestra los mensajes de error que aparezcan y permite elegir distintas convenciones de c칩digo seg칰n si queremos compartir nuestro ejemplo en GitHub, StackOverflow o un script de R.</p>
<p>Por ejemplo, d치ndole el c칩digo anterior, <code>reprex</code> devuelve esto:</p>
<pre><code>```r
library(ggplot2)
df &lt;- expand.grid(tiempo = 1:30, sujeto = factor(letters[1:3]))
dfset.seed(42)
$valor &lt;- with(df, tiempo*0.1*as.numeric(sujeto) + rnorm(nrow(df)))
ggplot(df, aes(tiempo, valor, color = sujeto)) +
   geom_line()
```

![](https://i.imgur.com/51BdMze.png)
</code></pre>
<p>Que est치 listo para pegar en GitHub y que salga todo perfecto.</p>
</div>
<div id="buen-reprex-mata-galan" class="section level2">
<h2>Buen reprex mata gal치n</h2>
<p>Pedir ayuda o reportar bugs con un buen ejemplo m칤nimo reproducible mejora la calidad de las consultas, ayuda a los que quieren ayudar, te hace ganar amigos y bajar 7 libras en 2 semanas. Sea bueno, haga un reprex.</p>
</div>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../2018/01/como-hacer-efecto-de-relieve-en-r/" data-tooltip="C칩mo hacer un efecto de relieve en R">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">SIGUIENTE</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../2017/12/calcular-ipe-r/" data-tooltip="C칩mo calcular el 칈ndice de Precipitaci칩n Estandarizado en R">
              
                  <span class="hide-xs hide-sm text-small icon-mr">ANTERIOR</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://eliocamp.github.io/codigo-r/2018/01/buen-ejemplo-reproducible-en-r/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://eliocamp.github.io/codigo-r/2018/01/buen-ejemplo-reproducible-en-r/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://eliocamp.github.io/codigo-r/2018/01/buen-ejemplo-reproducible-en-r/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2018 Elio Campitelli. Todos los derechos reservados
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="2">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../2018/01/como-hacer-efecto-de-relieve-en-r/" data-tooltip="C칩mo hacer un efecto de relieve en R">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">SIGUIENTE</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../2017/12/calcular-ipe-r/" data-tooltip="C칩mo calcular el 칈ndice de Precipitaci칩n Estandarizado en R">
              
                  <span class="hide-xs hide-sm text-small icon-mr">ANTERIOR</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://eliocamp.github.io/codigo-r/2018/01/buen-ejemplo-reproducible-en-r/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://eliocamp.github.io/codigo-r/2018/01/buen-ejemplo-reproducible-en-r/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://eliocamp.github.io/codigo-r/2018/01/buen-ejemplo-reproducible-en-r/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="2">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Feliocamp.github.io%2Fcodigo-r%2F2018%2F01%2Fbuen-ejemplo-reproducible-en-r%2F">
          <i class="fa fa-facebook-official"></i><span>Compartir en Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https%3A%2F%2Feliocamp.github.io%2Fcodigo-r%2F2018%2F01%2Fbuen-ejemplo-reproducible-en-r%2F">
          <i class="fa fa-twitter"></i><span>Compartir en Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https%3A%2F%2Feliocamp.github.io%2Fcodigo-r%2F2018%2F01%2Fbuen-ejemplo-reproducible-en-r%2F">
          <i class="fa fa-google-plus"></i><span>Compartir en Google&#43;</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="//www.gravatar.com/avatar/2376976935665241d1fd5a1fb8124a81?s=110" alt="Foto de autor" />
    
    <h4 id="about-card-name">Elio Campitelli</h4>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Atmospheric sciences graduate researcher at CONICET
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Argentina
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="Buscar" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center">no se encontraron art칤culos</div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://eliocamp.github.io/codigo-r/2018/09/multiple-color-fill-scales-ggplot2/">
                <h3 class="media-heading">Multiple color (and fill) scales with ggplot2</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">(Versi칩n en espa침ol)
tl;dr: You can find the relevant code in this gist.
A somewhat common annoyance for some ggplot2 users is the lack of support for multiple colour and fill scales. Perusing StackOverflow you can find many questions relating to this issue:

Unfortunately, this deluge of questions is met with a shortage of conclusive answers, most of them being some variation of &ldquo;you can&rsquo;t, but here&rsquo;s how to hack it or visualise the data differently&rdquo;.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://eliocamp.github.io/codigo-r/2018/09/multiples-escalas-colores-ggplot2/">
                <h3 class="media-heading">M칰ltiples escalas de colores en ggplot2</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">(English version)
tl;dr: En este gist est치 el c칩digo importante
Un dolor importante para algunos usuarios de ggplot2 es la imposibilidad de usar m치s de una escala para cada tipo de par치metro est칠tico. Una b칰squeda en StackOverflow da como resultado m칰ltiples preguntas:

Pero ninguna respuesta tiene una soluci칩n realmente satisfactoria; la mayor칤a son del tipo &ldquo;no se puede, pero esta es otra forma de graficar tus datos&rdquo;.
Tener varias escalas distintas para el mismo par치metro est칠tico tiene riesgos, pero tambi칠n beneficios.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://eliocamp.github.io/codigo-r/2018/08/periodic-data-ggplot2-ggperiodic/">
                <h3 class="media-heading">Wrapping around ggplot2 with ggperiodic</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Aug 8, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">As an atmospheric scientists, a lot of my research consists on plotting and looking at global fields of atmospheric variables like pressure, temperature and the like. Since our planet is a sphere (well, almost), it is unbound and so longitude is a periodic dimension. That is, to the right of 180춿E you go back to 180춿W. But ggplot2 and other plotting systems, for the most part, assume linear dimensions.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://eliocamp.github.io/codigo-r/2018/06/tu-propio-geom-smooth/">
                <h3 class="media-heading">Tu propio smooth en geom_smooth()</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jun 6, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Algo incre칤blemente satisfactorio de ggplot2 es la posibilidad de ajustar curvas a los datos de manera s칰per f치cil con geom_smooth(). Para mi investigaci칩n estaba mirando la relaci칩n entre dos 치ngulos y me di cuenta que la recta ajustada por cuadrados m칤nimos no estaba funcionando para ilustrar la obvia estructura que hab칤a en los datos.
library(ggplot2) df &lt;- readRDS(&quot;data/smooth_example.Rds&quot;) ggplot(df, aes(pc.angle, phase)) + geom_point() + geom_smooth(method = &quot;lm&quot;)  Se me ocurri칩 que un mejor modelo podr칤a ser usando el estimador de Theil-Sen, que es la mediana de todas las pendientes entre dos puntos distintos y est치 implementado en el paquete mblm.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://eliocamp.github.io/codigo-r/2018/05/presentacion-powerpoint-rmarkdown/">
                <h3 class="media-heading">Hacer una presentaci칩n de PowerPoint a partir de rmarkdown</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">La interfaz entre usuarios de knitr/markdown y word/powerpoint no deja de ser 치spera ya que es dif칤cil cambiar el workflow propio para acomodar el de otras personas. En particular, es muy com칰n tener que colaborar con personas que se sienten mucho m치s c칩modas trabajando con presentaciones en PowerPoint que en las creadas con beamer o ioslides. Una forma de reducir la fricci칩n ser칤a la de generar un ppt autom치ticamente a partir de una archivo de markdown.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://eliocamp.github.io/codigo-r/2018/05/arte-reproducible-del-subte-de-buenos-aires/">
                <h3 class="media-heading">Arte reproducible del Subte de Buenos Aires</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">El s치bado pasado est치bamos en el subte con mi novia y pasamos por la estaci칩n 츼ngel Gallardo de la L칤nea B y notamos que ten칤a unas ilustraciones en las paredes hechas a partir de l칤neas de distinto grosor.
Charlamos un poco sobre ese estilo y c칩mo se pod칤a replicar con ggplot2 usando el paquete ggridges.
Lo primero que hago es leer la imagen. Este paso depende del formato (a menos que haya alguna forma de seleccionar el formato correcto autom치ticamente, pero no conozco).</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://eliocamp.github.io/codigo-r/2018/05/como-hacer-un-stat-generico-en-ggplot2/">
                <h3 class="media-heading">Como hacer un stat gen칠rico en ggplot2</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Hace un tiempo que ven칤a pensando que si bien ggplot2 es genial y tiene un mont칩n de geoms y stats, le faltaba la opci칩n de extenderlo a stats y geoms creados por el usuario. Luego, aprend칤 que ggplot2 tiene un excelente sistema para extenderlo y empec칠 a crear mis propios stats. Pero a칰n as칤, hacer un stat espec칤fico cada vez que uno quiere hacer un plot en particular es demasiado complicado.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://eliocamp.github.io/codigo-r/2018/05/how-to-make-a-generic-stat-in-ggplot2/">
                <h3 class="media-heading">How to make a generic stat in ggplot2</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">For a while now I&rsquo;ve been thinking that, yes, ggplot2 is awesome and offers a lot of geoms and stats, but it would be great if it could be extended with new user-generated geoms and stats. Then I learnt that ggplot2 actually has a pretty great extension system so I could create my own geoms I needed for my work or just for fun. But still, creating a geom from scratch is an involved process that doesn&rsquo;t lend itself to simple transformations.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://eliocamp.github.io/codigo-r/2018/02/how-to-make-shaded-relief-in-r/">
                <h3 class="media-heading">How to make a shaded relief in R</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Feb 2, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Spanish version of this post
While trying to build a circular colour scale to plot angles and wind direction, I stumbled upon an easy way to make shaded reliefs in R. You known, when you look at cool maps of mountain areas where peaks and valleys are easily distinguishable from their shadows like this:
What I accidentally discovered is that one way of approximating this look is by taking the directional derivatives of height and then plotting the cosine of its angle from the sun.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://eliocamp.github.io/codigo-r/2018/01/como-hacer-efecto-de-relieve-en-r/">
                <h3 class="media-heading">C칩mo hacer un efecto de relieve en R</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jan 1, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">(Versi칩n en ingl칠s)
Estaba tratando de hacer una gu칤a de colores circular (que los extremos tengan el mismo color) para hacer gr치ficos de 치ngulos o direcciones del viento, cuando descubr칤 una forma interesante de crear un efecto de relieve en mapas de topograf칤a.
Digamos que tenemos datos de altura del suelo sobre el nivel del mar en una grilla regular. Como ejemplo vamos a usar la vieja y querida volcano.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero="no se encontraron art칤culos"
         data-message-one="1 art칤culo encontrado"
         data-message-other="{n} art칤culos encontrados">
         13 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('https://eliocamp.github.io/codigo-r/images/cover2.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js" integrity="sha256-XrZQp+ZMfovqr6Hb2M6okHvSEYaB/+Xbx7toWmOOZUM=" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-light.min.css" integrity="sha256-KacbO6Nou2geGJEUzQeKzKEdp/DENVGJKAd2v37moh0=" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="../../../js/script-qi9wbxp2ya2j6p7wx1i6tgavftewndznf4v0hy2gvivk1rxgc3lm7njqb6bz.min.js"></script>



<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
      <script>
        var disqus_config = function () {
          this.page.url = 'https:\/\/eliocamp.github.io\/codigo-r\/2018\/01\/buen-ejemplo-reproducible-en-r\/';
          
            this.page.identifier = '\/2018\/01\/buen-ejemplo-reproducible-en-r\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'codigo-r';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  



    
  </body>
</html>

