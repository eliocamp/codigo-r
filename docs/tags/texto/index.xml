<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Texto on C√≥digo R</title>
    <link>https://eliocamp.github.io/codigo-r/tags/texto/</link>
    <description>Recent content in Texto on C√≥digo R</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>es-es</language>
    <lastBuildDate>Tue, 24 Dec 2019 00:00:00 +0000</lastBuildDate>
    
        <atom:link href="https://eliocamp.github.io/codigo-r/tags/texto/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Obligu√© a un bot a escuchar m√°s de 1000 horas de Rammstein y le ped√≠ que escribiera una canci√≥n propia.</title>
      <link>https://eliocamp.github.io/codigo-r/2019/12/rammbot-un-bot-que-crea-canciones-de-rammstein/</link>
      <pubDate>Tue, 24 Dec 2019 00:00:00 +0000</pubDate>
      
      <guid>https://eliocamp.github.io/codigo-r/2019/12/rammbot-un-bot-que-crea-canciones-de-rammstein/</guid>
      <description>


&lt;p&gt;Cuando le cont√© a una amiga que &lt;a href=&#34;../../2019/11/rammstein-vs-lacrimosa/&#34;&gt;hab√≠a analizado las letras de Rammstein y Lacrimosa&lt;/a&gt;, me tir√≥ la idea de usar un modelo para crear letras de las bandas. Me pareci√≥ una idea divertida, as√≠ que ac√° tienen el futuro de la m√∫sica:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(data.table)
library(magrittr)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Igual que hice antes, bajo las letras de losdiscos de estudio de cada artista. Guardo las cosas en un archivo para no tener que bajar los datos cada vez que corro esto. Adem√°s de bajar las letras, uso textcat para determinar el idioma de las letras (no todas est√°sn en alem√°n).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;lacrimosa &amp;lt;- data.table(
  album = c(&amp;quot;Angst&amp;quot;, &amp;quot;Einsemkeit&amp;quot;, &amp;quot;Satura&amp;quot;, &amp;quot;Inferno&amp;quot;, &amp;quot;Stille&amp;quot;, &amp;quot;Elodia&amp;quot;, &amp;quot;Fassade&amp;quot;, &amp;quot;Echos&amp;quot;, 
            &amp;quot;Lichtgestalt&amp;quot;, &amp;quot;Sehnsucht&amp;quot;, &amp;quot;Revolution&amp;quot;, &amp;quot;Hoffnung&amp;quot;, &amp;quot;Testimonium&amp;quot;),
  year = c(1991, 1992, 1993, 1995, 1997, 1999, 2001, 2003,
           2005, 2009, 2012, 2015, 2017)
)

rammstein &amp;lt;- data.table(
  album = c(&amp;quot;Herzeleid&amp;quot;, &amp;quot;Sehnsucht&amp;quot;, &amp;quot;Mutter&amp;quot;, &amp;quot;Reise Reise&amp;quot;, &amp;quot;Rosenrot&amp;quot;, 
            &amp;quot;Liebe ist fur alle da&amp;quot;,  &amp;quot;Rammstein&amp;quot;),
  year = c(1995, 1997, 2001, 2004, 2005, 2009, 2019)
)

albums &amp;lt;- rbindlist(list(Lacrimosa = lacrimosa, 
                         Rammstein = rammstein), 
                    idcol = &amp;quot;artist&amp;quot;)
cache &amp;lt;- here::here(&amp;quot;content&amp;quot;, &amp;quot;post&amp;quot;, &amp;quot;data&amp;quot;, &amp;quot;letras.Rds&amp;quot;)

if (file.exists(cache)) {
  lyrics &amp;lt;- readRDS(cache)
} else {
  lyrics &amp;lt;-  albums %&amp;gt;% 
    genius::add_genius(artist, album) %&amp;gt;% 
    as.data.table() %&amp;gt;% 
    .[artist == &amp;quot;Lacrimosa&amp;quot; &amp;amp; album == &amp;quot;Sehnsucht&amp;quot;, album := &amp;quot;Sehnsucht (L)&amp;quot;]  %&amp;gt;% 
    .[, lang := textcat::textcat(paste0(lyric, collapse = &amp;quot;\n&amp;quot;)), by = .(track_title, artist)] %&amp;gt;% 
    na.omit()
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ahora a los bifes. El bot lo voy a hacer como una cadena de Markov. Lo que signfica es que toma una palabra y luego elije la siguiente al azar usando la probabilidad condicional de cada palabra. Es decir, ¬øcu√°l es la probabilidad de que a esta palabra le siga esta otra? Como ejemplo, voy a trabajar con las letras de Rammstein (y que est√©n en alem√°n) y a partir de eso voy a armar una funci√≥n generalizable.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;corpus &amp;lt;- lyrics[lang == &amp;quot;german&amp;quot; &amp;amp; artist == &amp;quot;Rammstein&amp;quot;]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para delimitar las estrofas voy a usar puntuaci√≥n. Entonces voy a primero detectar qu√© l√≠neas terminan con un punto, signo de pregunta o exlamaci√≥n y agregar un punto a las que NO terminan con puntuaci√≥n.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;corpus &amp;lt;- corpus %&amp;gt;% 
  .[, has_punct := grepl(&amp;quot;^[\\w\\s]+[?.!]$&amp;quot;, lyric, perl = TRUE)] %&amp;gt;% 
  .[has_punct == FALSE, lyric := paste0(lyric, &amp;quot;.&amp;quot;)]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Luego, con la magia de tidytext separo las palabras (sin eliminar la puntuaci√≥n), creo una columna que es la palabra siguiente y luego calculo, para cada par de palabras, la probabilida de que a una palabra le siga la otra.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;freq &amp;lt;- corpus %&amp;gt;% 
  tidytext::unnest_tokens(word, lyric, strip_punct = FALSE) %&amp;gt;% 
  as.data.table()  %&amp;gt;% 
  .[, next_word := shift(word, type = &amp;quot;lead&amp;quot;)] %&amp;gt;% 
  na.omit() %&amp;gt;% 
  .[, n_word := .N, by = .(word)] %&amp;gt;%        # n√∫mero de veces que aparece la palabra (para normalizar)
  .[, .(n_next_word = .N, n_word = n_word[1]), by = .(word, next_word)] %&amp;gt;% 
  .[, prob := n_next_word/n_word] %&amp;gt;%                
  .[n_word &amp;gt; 5] %&amp;gt;%                          # me quedo con las palabras que aparecen m√°s de 5 veces
  .[order(-prob)]

head(freq)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##         word next_word n_next_word n_word prob
## 1: verderben         .          10     10    1
## 2:      boot         .           6      6    1
## 3:   riechst        so          14     14    1
## 4: hinterher         .           7      7    1
## 5:     sache       und           6      6    1
## 6:      jede     nacht           7      7    1&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ahora, armo una funci√≥n que a partir de una palabra, selecciona la siguiente:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;next_word &amp;lt;- function(prev_word) {
  if (prev_word %in% freq$word) {
    next_word &amp;lt;- freq[word == prev_word] %&amp;gt;% 
      .[, sample(next_word, size = 1, prob = prob)]   # Samplea 1 palabra sigiente usando la probabilidad calculada arriba
  } else {
    # Si la palabra no aparece...
    next_word &amp;lt;- freq %&amp;gt;% 
      .[, sample(word, 1)]        # Elegir cualquiera aleatoriametne pero seg√∫n su frecuencia. 
  }
  
  return(next_word)
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Por ejemplo,&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;next_word(&amp;quot;ich&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;bin&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ahora, sobre esa funcion, armo otra que a partir de una palabra inicial va agregando palabras hasta encontrarse con un signo de puntuaci√≥n (que indica que se termina el verso). Adem√°s, le agrego un truco recursivo por si la cadena de palabras se hace demasiado larga.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;verse &amp;lt;- function(first_word = NULL, n_max = 20) {
  if (is.null(first_word)) {
    first_word &amp;lt;- first_words[, sample(word, size = 1, prob = N)]
  }
  
  verse &amp;lt;- tolower(first_word)
  word_candidate &amp;lt;- verse
  
  end_verse &amp;lt;- FALSE
  n &amp;lt;- 1
  while(end_verse == FALSE &amp;amp;&amp;amp; n &amp;lt; n_max) {
    word_candidate &amp;lt;- next_word(word_candidate)
    
    if (n == 1) {
      verse &amp;lt;- R.utils::capitalize(verse)
    }
    
    end_verse &amp;lt;- grepl(&amp;quot;[?.!]$&amp;quot;, word_candidate, perl = TRUE)
    punctuation &amp;lt;- grepl(&amp;quot;[[:punct:]]&amp;quot;, word_candidate)
    
    if (punctuation) {
      verse &amp;lt;- paste0(verse, word_candidate)
    } else {
      verse &amp;lt;- paste0(verse, &amp;quot; &amp;quot;, word_candidate)
    }
    n &amp;lt;- n + 1
  }
  
  # Si no lleg√≥ a un final, volv√© a tratar. 
  if (n == n_max) {
    verse &amp;lt;- verse(first_word = first_word, n_max = n_max)
  }
  verse
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Por ejemplo:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;verse(&amp;quot;ich&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Registered S3 method overwritten by &amp;#39;R.oo&amp;#39;:
##   method        from       
##   throw.default R.methodsS3&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;Ich nirgendwo schreien.&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;¬øQu√© palabra puedo usar para empezar? En principio podr√≠a usar cualquiera que aparezca en el corpus, pero para hacer las cosas un poco m√°s f√°ciles voy a seleccionar especialmente palabras iniciales. Me voy a agarrar una lista de ‚Äúprimeras palabras‚Äù y computar tambi√©n su frecuencia.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;first_words &amp;lt;- corpus %&amp;gt;% 
  copy() %&amp;gt;% 
  .[, id := 1:.N] %&amp;gt;% 
  .[, tidytext::unnest_tokens(.SD, word, lyric, strip_punct = FALSE), by = id] %&amp;gt;% 
  .[, .SD[1], by = id] %&amp;gt;% 
  .[, .N, by = word]

head(first_words)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##         word  N
## 1:     wollt  4
## 2:       ihr 13
## 3: rammstein 25
## 4:      doch 46
## 5:       sex 11
## 6:     liebe 14&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;set.seed(43543) # para reproducibilidad
verse(first_words[, sample(word, 1, prob = N)])&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;Wir sind nicht.&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;‚ÄúNo somos‚Äù. Mh‚Ä¶ profundo.&lt;/p&gt;
&lt;p&gt;En fin. Ahora a empaquetar todo eso en una sola funci√≥n que crea un bot a partir de un corpus. La mayor√≠a del c√≥digo es el mismo de arriba. La funci√≥n que devuelve toma una semilla (opcional) y un n√∫mero de versos para generar una estrofa.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;make_lyric_bot &amp;lt;- function(corpus) {
  corpus &amp;lt;- as.data.table(na.omit(corpus))
  
  first_words &amp;lt;- corpus %&amp;gt;% 
    .[, id := 1:.N] %&amp;gt;% 
    .[, tidytext::unnest_tokens(.SD, word, lyric, strip_punct = FALSE), by = id] %&amp;gt;% 
    .[, .SD[1], by = id] %&amp;gt;% 
    .[, .N, by = word]
  
  freq &amp;lt;- corpus %&amp;gt;% 
    copy() %&amp;gt;% 
    .[, has_punct := grepl(&amp;quot;^[\\w\\s]+[?.!]$&amp;quot;, lyric, perl = TRUE)] %&amp;gt;% 
    .[has_punct == FALSE, lyric := paste0(lyric, &amp;quot;.&amp;quot;)] %&amp;gt;% 
    tidytext::unnest_tokens(word, lyric, strip_punct = FALSE) %&amp;gt;% 
    as.data.table()  %&amp;gt;% 
    .[, next_word := shift(word, type = &amp;quot;lead&amp;quot;)] %&amp;gt;% 
    na.omit() %&amp;gt;% 
    .[, n_word := .N, by = .(word)] %&amp;gt;%               # n√∫mero de veces que aparece la palabra (para normalizar)
    .[, .(n_next_word = .N, n_word = n_word[1]), by = .(word, next_word)] %&amp;gt;% 
    .[, prob := n_next_word/n_word] %&amp;gt;%                
    .[n_word &amp;gt; 5] %&amp;gt;%                                    # me quedo con las palabras que aparecen m√°s de 5 veces
    .[order(-prob)]
  
  
  next_word &amp;lt;- function(prev_word) {
    if (prev_word %in% freq$word) {
      next_word &amp;lt;- freq[word == prev_word] %&amp;gt;% 
        .[, sample(next_word, size = 1, prob = prob)]     # Samplea 1 palabra sigiente usando la probabilidad calculada arriba
    } else {
      # Si la palabra no aparece...
      next_word &amp;lt;- freq %&amp;gt;% 
        .[, sample(word, 1)]          # Elegir cualquiera aleatoriametne pero seg√∫n su frecuencia. 
    }
    
    return(next_word)
  }
  
  verse &amp;lt;- function(first_word = NULL, n_max = 20) {
    if (is.null(first_word)) {
      first_word &amp;lt;- first_words[, sample(word, size = 1, prob = N)]
    }
    
    verse &amp;lt;- tolower(first_word)
    word_candidate &amp;lt;- verse
    
    end_verse &amp;lt;- FALSE
    n &amp;lt;- 1
    while(end_verse == FALSE &amp;amp;&amp;amp; n &amp;lt; n_max) {
      word_candidate &amp;lt;- next_word(word_candidate)
      
      if (n == 1) {
        verse &amp;lt;- R.utils::capitalize(verse)
      }
      
      end_verse &amp;lt;- grepl(&amp;quot;[?.!]$&amp;quot;, word_candidate, perl = TRUE)
      punctuation &amp;lt;- grepl(&amp;quot;[[:punct:]]&amp;quot;, word_candidate)
      
      if (punctuation) {
        verse &amp;lt;- paste0(verse, word_candidate)
      } else {
        verse &amp;lt;- paste0(verse, &amp;quot; &amp;quot;, word_candidate)
      }
      n &amp;lt;- n + 1
    }
    
    # Si no lleg√≥ a un final, volv√© a tratar. 
    if (n == n_max) {
      verse &amp;lt;- verse(first_word = first_word, n_max = n_max)
    }
    verse
  }
  
  function(seed = NULL, n = 4) {
    if (inherits(seed, &amp;quot;lyric&amp;quot;)) {
      seed &amp;lt;-  attr(seed, &amp;quot;seed&amp;quot;)
      assign(&amp;quot;.Random.seed&amp;quot;, seed, globalenv())
      res &amp;lt;- vapply(seq_len(n), function(x) verse(), &amp;quot;a&amp;quot;)
    } else if (is.null(seed)) {
      seed &amp;lt;- get(&amp;quot;.Random.seed&amp;quot;, globalenv(), mode = &amp;quot;integer&amp;quot;, inherits = FALSE)   
      # set.seed(seed)
      res &amp;lt;- vapply(seq_len(n), function(x) verse(), &amp;quot;a&amp;quot;)
    } else {
      res &amp;lt;- withr::with_seed(seed, vapply(seq_len(n), function(x) verse(), &amp;quot;a&amp;quot;))      
    }
    
    attr(res, &amp;quot;seed&amp;quot;) &amp;lt;- seed
    class(res) &amp;lt;- c(&amp;quot;lyric&amp;quot;, class(res))
    return(res)
  }
}

print.lyric &amp;lt;- function(x, ...) {
  x &amp;lt;- paste(paste0(&amp;quot;&amp;gt; &amp;quot;, x), collapse = &amp;quot;   \n&amp;quot;)
  cat(x)
}&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;lacribot &amp;lt;- make_lyric_bot(lyrics[lang == &amp;quot;german&amp;quot; &amp;amp; artist == &amp;quot;Lacrimosa&amp;quot;])
rammbot &amp;lt;- make_lyric_bot(lyrics[lang == &amp;quot;german&amp;quot; &amp;amp; artist == &amp;quot;Rammstein&amp;quot;])&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ahora estas funciones generan estrofas pseudo-lacrimosa y pseudo-rammstein:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;rammbot(seed = 12345, n = 4)&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;Nur die ecke immer.&lt;br /&gt;
Wir halten das bin alleine.&lt;br /&gt;
Die asche.&lt;br /&gt;
Mein teil‚Äì nein.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Estas oraciones no aprobar√≠an una prueba de Alem√°n 1, pero si damos un poco de licencia po√©tica, imaginaci√≥n y agregando un poco de puntuaci√≥n se podr√≠a traducir a:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;S√≥lo la esquina, siempre.&lt;br /&gt;
Creemos que estamos solos.&lt;br /&gt;
Las cenizas.&lt;br /&gt;
Mi parte - no.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Un detalle curioso es que en alem√°n todos los sustantivos van en may√∫sculas pero en el procesamiento de los datos se las quit√©. Habr√≠a que cambiar el tokenizador para que no pase todo a m√≠n√∫sculas, pero bueno, ya est√°.&lt;/p&gt;
&lt;p&gt;Otra copada:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;rammbot(seed = 3123)&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;Und keiner der sonne.&lt;br /&gt;
Oh weh, mutter.&lt;br /&gt;
Wie ein spiel begann zu gehen.&lt;br /&gt;
Eifersucht.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Y nadie del Sol.&lt;br /&gt;
Oh dolor, madre.&lt;br /&gt;
Como un juego, empez√≥ a irse.&lt;br /&gt;
Celos.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;¬øY qu√© dice Lacribot?&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;lacribot(seed = 47665, n = 5)&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;Dir.&lt;br /&gt;
Millionen uns beide augen brennen eine kluft mit schweren licht, ich rei√üe a dream has.&lt;br /&gt;
Niemand erlebt mensch zu ihr- nichts.&lt;br /&gt;
Ich sie nie sah die dich.&lt;br /&gt;
Und im wind ich dich.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Ups, se me infiltr√≥ un poco de ingl√©s.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A t√≠.&lt;br /&gt;
Millones de nosotros, ambos ojos queman una brecha con luz pesada, yo rompo un sue√±o.&lt;br /&gt;
Nadie experimenta humanamente a ella- nada.&lt;br /&gt;
Yo, ella, nunca te vi.&lt;br /&gt;
Y en el viento yo a t√≠.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;lacribot(seed = 6)&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;Keine stillen.&lt;br /&gt;
Nur diesen schmerz zerquetschte lebens.&lt;br /&gt;
Und vielleicht nicht mehr.&lt;br /&gt;
Ihn.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;No amamantar.&lt;br /&gt;
S√≥lo esta vida aplastada por el dolor.&lt;br /&gt;
Y quiz√°s no m√°s.&lt;br /&gt;
A √©l.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;No s√© si estas funciones podr√°n ganar un premio, pero probablemente escriban mejor poes√≠a que yo.&lt;/p&gt;
&lt;p&gt;Para cerrar, vamos a armar una canci√≥n de Rammstein.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;set.seed(23543)
intro &amp;lt;- rammbot(n = 3)
pre_estribillo &amp;lt;- rammbot(n = 1)
estribillo &amp;lt;- rammbot()
estrofa1 &amp;lt;- rammbot()
estrofa2 &amp;lt;- rammbot()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Y as√≠ de f√°cil, les presento el nuevo hit de Rammstein, que voy a titular ‚ÄúUnd Frei‚Äù.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;
&lt;/p&gt;
&lt;p&gt;
Feuer liebt mich ganz auf die kreatur.&lt;br /&gt;Tut es wird nass fallen.&lt;br /&gt;Asche zu lebzeit in amerika).&lt;br /&gt;
&lt;/p&gt;
&lt;p&gt;
Schwuler.&lt;br /&gt;Ich die musik.&lt;br /&gt;Ohne dich).&lt;br /&gt;Verhei√üung sag ihr bleibt nicht dass ich hab‚Äô das r√∂slein ihn lesen —Ç–∞–º –∏ —Ç—É—Ç.&lt;br /&gt;
&lt;/p&gt;
&lt;p&gt;
Laben brauch keine lust vom degen.&lt;br /&gt;
&lt;/p&gt;
&lt;p&gt;
Und frei!&lt;br /&gt;Ich werde immer wenn ich nehme in schlechten i can, was nicht sein.&lt;br /&gt;Recht wortlos auch den kleinen so kalt, du mir.&lt;br /&gt;Asche.&lt;br /&gt;
&lt;/p&gt;
&lt;p&gt;
Die liebe ist f√ºr ein.&lt;br /&gt;Du hast, benzin.&lt;br /&gt;Zwei, du sehen?&lt;br /&gt;Verlogen euch scheidet von der tiefe brunnen mehr ach scheine.&lt;br /&gt;
&lt;/p&gt;
&lt;p&gt;
Und frei!&lt;br /&gt;Ich werde immer wenn ich nehme in schlechten i can, was nicht sein.&lt;br /&gt;Recht wortlos auch den kleinen so kalt, du mir.&lt;br /&gt;Asche.&lt;br /&gt;
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;¬øAlguien quiere musicalizarlo?&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Rammstein vs. Lacrimosa</title>
      <link>https://eliocamp.github.io/codigo-r/2019/11/rammstein-vs-lacrimosa/</link>
      <pubDate>Thu, 21 Nov 2019 00:00:00 +0000</pubDate>
      
      <guid>https://eliocamp.github.io/codigo-r/2019/11/rammstein-vs-lacrimosa/</guid>
      <description>
&lt;script src=&#34;../../rmarkdown-libs/htmlwidgets/htmlwidgets.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;../../rmarkdown-libs/pymjs/pym.v1.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;../../rmarkdown-libs/widgetframe-binding/widgetframe.js&#34;&gt;&lt;/script&gt;


&lt;p&gt;Hace un tiempo una conocida twite√≥ que hab√≠a tenido que comprarse un libro entero para aprender los g√©neros gramaticales del alem√°n. Entre las repuestas, hab√≠a una persona que contaba que de adolescente crey√≥ (err√≥neamente) que podr√≠a aprender alem√°n s√≥lo escuchando Rammstein. Habeindo estudiado unos drei Jahre de alem√°n al mismo tiempo que escuchaba Rammstein y otras bandas en alem√°n, las letras de Rammstein siempre me parecieron extremadamente simples. Tan simples, de hecho, que sospecho que Till Lindemann trata de escribir de forma f√°cil pensando en los estudiantes principantes de alem√°n.&lt;/p&gt;
&lt;p&gt;Decid√≠ explorar esta idea. Para eso descargu√© las letras de Rammstein y med√≠ su complejidad. Como comparaci√≥n us√© letras de Lacrimsoa, otra banda germanoparlante de mi juventud.&lt;/p&gt;
&lt;div id=&#34;un-poco-de-los-datos&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Un poco de los datos&lt;/h2&gt;
&lt;p&gt;Para quienes no est√©n familiarizados con ambas bandas, este es el estribillo de &lt;a href=&#34;https://www.youtube.com/watch?v=StZcUAPRRac&#34;&gt;Sonne&lt;/a&gt;, de Rammstein:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Eins, hier kommt die Sonne.&lt;br /&gt;
Zwei, hier kommt die Sonne.&lt;br /&gt;
Drei, sie ist der hellste Stern von allen.&lt;br /&gt;
Vier, hier kommt die Sonne.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;M√°s all√° de las sutilezas de significado y el uso de met√°foras, la estructura sint√°ctica es recontra simple. Para colmo, como repite los n√∫meros del uno al diez una y otra vez, casi que parece una canci√≥n dise√±ada para que los chicos aprendan a contar.&lt;/p&gt;
&lt;p&gt;Por otro lado, este es un recorte de &lt;a href=&#34;https://www.youtube.com/watch?v=cSXaWvFFXuI&#34;&gt;Warum so Tief&lt;/a&gt;, de Lacrimosa:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Warum so tief - und warum gerade jetzt?&lt;br /&gt;
Warum vor ihr - warum diese Ironie?&lt;br /&gt;
Warum so hart - und warum nicht einfach besiegt?&lt;br /&gt;
Muss ich denn wirklich f√ºr jede Begegnung&lt;br /&gt;
f√ºr immer und ewig mit all meiner Liebe bezahlen?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Einmal ohne das eine und endg√ºltige Gef√ºhl - verloren zu sein&lt;br /&gt;
Nur einmal bei ihr - keine Tobsucht in Ketten&lt;br /&gt;
Doch ich kann es nicht ‚Äômal bestreiten - dass ich euch liebe&lt;br /&gt;
Mutter Angst und Vater Schmerz&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Creo que el contraste se aprecia f√°cilmente. En particular, los √∫ltimos dos versos de la primera estrofa arman una oraci√≥n sorprendentemente larga, especialmente para ser una canci√≥n.&lt;/p&gt;
&lt;p&gt;Estos dos ejemplos est√°n clarmaente seleccionados para ilustrar mi idea. Vamos a cuantificar la cosa analizando todas las canciones de cada banda.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;consiguiendo-los-datos&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Consiguiendo los datos&lt;/h2&gt;
&lt;p&gt;Quiero las letras correspondientes a los discos de estudio de ambas bandas. Podr√≠a automatizar esto scrappeando, por ejemplo, los &lt;a href=&#34;https://es.wikipedia.org/wiki/Lacrimosa_(banda)&#34;&gt;art√≠culos de wikipedia&lt;/a&gt; correspondientes, pero fue m√°s f√°cil armar la lista a mano.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(data.table)
library(magrittr)
library(ggplot2)

theme_set(hrbrthemes::theme_ipsum_rc())&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;lacrimosa &amp;lt;- data.table(
   album = c(&amp;quot;Angst&amp;quot;, &amp;quot;Einsemkeit&amp;quot;, &amp;quot;Satura&amp;quot;, &amp;quot;Inferno&amp;quot;, &amp;quot;Stille&amp;quot;, &amp;quot;Elodia&amp;quot;, &amp;quot;Fassade&amp;quot;, &amp;quot;Echos&amp;quot;, 
             &amp;quot;Lichtgestalt&amp;quot;, &amp;quot;Sehnsucht&amp;quot;, &amp;quot;Revolution&amp;quot;, &amp;quot;Hoffnung&amp;quot;, &amp;quot;Testimonium&amp;quot;),
   year = c(1991, 1992, 1993, 1995, 1997, 1999, 2001, 2003,
            2005, 2009, 2012, 2015, 2017)
)

rammstein &amp;lt;- data.table(
   album = c(&amp;quot;Herzeleid&amp;quot;, &amp;quot;Sehnsucht&amp;quot;, &amp;quot;Mutter&amp;quot;, &amp;quot;Reise Reise&amp;quot;, &amp;quot;Rosenrot&amp;quot;, 
             &amp;quot;Liebe ist fur alle da&amp;quot;,  &amp;quot;Rammstein&amp;quot;),
   year = c(1995, 1997, 2001, 2004, 2005, 2009, 2019)
)

albums &amp;lt;- rbindlist(list(Lacrimosa = lacrimosa, 
                         Rammstein = rammstein), 
                    idcol = &amp;quot;artist&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Luego, us√© el paquete &lt;a href=&#34;https://github.com/JosiahParry/genius&#34;&gt;genius&lt;/a&gt; que descarga las letras de (sorpresa) &lt;a href=&#34;https://genius.com/&#34;&gt;Genius&lt;/a&gt;&lt;a href=&#34;#fn1&#34; class=&#34;footnote-ref&#34; id=&#34;fnref1&#34;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;. Lo que hago es agregar la informaci√≥n de las letras al data frame anterior:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;albums &amp;lt;- albums %&amp;gt;% 
   genius::add_genius(artist, album) %&amp;gt;% 
   as.data.table() %&amp;gt;% 
   .[artist == &amp;quot;Lacrimosa&amp;quot; &amp;amp; album == &amp;quot;Sehnsucht&amp;quot;, album := &amp;quot;Sehnsucht (L)&amp;quot;]  
# (Las dos bandas tienen un album llamado Sehnsucht)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ahora cada fila de &lt;code&gt;albums&lt;/code&gt; es un verso de cada canci√≥n de cada artista.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;DT::datatable(albums) %&amp;gt;% 
   widgetframe::frameWidget()&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-1&#34; style=&#34;width:100%;height:480px;&#34; class=&#34;widgetframe html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-1&#34;&gt;{&#34;x&#34;:{&#34;url&#34;:&#34;/post/2019-11-20-rammstein-vs-lacrimosa_files/figure-html//widgets/widget_unnamed-chunk-4.html&#34;,&#34;options&#34;:{&#34;xdomain&#34;:&#34;*&#34;,&#34;allowfullscreen&#34;:false,&#34;lazyload&#34;:false}},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;/div&gt;
&lt;div id=&#34;legibilidad-de-las-letras-de-rammstein&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Legibilidad de las letras de Rammstein&lt;/h2&gt;
&lt;p&gt;Con estos datos voy a tratar de testear mi hip√≥tesis. ¬øPero como? Lo que voy a hacer es calcular la &lt;a href=&#34;https://legible.es/blog/grado-smog-sol/&#34;&gt;legibilidad&lt;/a&gt; de cada letra. Mi suposici√≥n es que las letras de Rammstein van a tener menor grado de legibilidad (es decir, son m√°s simples) que las de Lacrimosa. Una lmitaci√≥n es que las formulas de legibilidad est√°n basadas en ingl√©s. Este problema est√° muy presente siempre que se analizan textos que no sean en ingl√©s. En este caso, google√© un poco y encont≈ïe que la f√≥rmula &lt;a href=&#34;https://en.wikipedia.org/wiki/SMOG&#34;&gt;SMOG&lt;/a&gt; tiene una variante adaptada al alem√°n que est√° implementada en el paquete &lt;a href=&#34;https://quanteda.io/&#34;&gt;quantea&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Relacionado con eso, no todas las canciones de estas bandas est√°n en Alem√°n. La mayor√≠a de los √°lbumes de Lacrimosa tienen al menos una canci√≥n en ingl√©s (generalmente cantada por Anne Nurmi en vez de Tilo Wolff). As√≠ que voy a tener que detectarlas y descartarlas en partes del an√°lisis. De nuevo google me salv√≥, y encontr√© el paquete &lt;a href=&#34;https://cran.r-project.org/web/packages/textcat/index.html&#34;&gt;textcat&lt;/a&gt;, que voy a considerar una caja negra porque ya ser√≠a demasiado.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Join all verses from each song
full_lyrics &amp;lt;- albums %&amp;gt;% 
   na.omit() %&amp;gt;% 
   .[, .(lyric = paste0(lyric, collapse = &amp;quot;.\n&amp;quot;) ), 
     by = .(artist, album, year, track_title)]

# Get the language
full_lyrics[, language := textcat::textcat(lyric), 
            by = .(track_title, artist, album)]

# How many songs for each language?
full_lyrics %&amp;gt;% 
   .[, .N, by = .(artist, language)] %&amp;gt;% 
   .[order(-N)] %&amp;gt;% 
   knitr::kable()&lt;/code&gt;&lt;/pre&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th align=&#34;left&#34;&gt;artist&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;language&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;N&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Lacrimosa&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;german&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;81&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Rammstein&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;german&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;75&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Lacrimosa&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;english&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;16&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Rammstein&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;scots&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Lacrimosa&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;scots&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Lacrimosa&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;catalan&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Lacrimosa&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;romanian&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Lacrimosa&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;finnish&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Rammstein&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;english&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Rammstein&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;portuguese&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Como era de esperarse, la gran mayor√≠a de las canciones est√°n en Alem√°n pero una parte improtante de las de Lacrimosa est√°n en ingl√©s. Algunas parecen mal clasificadas y tuve que mirarlas a mano. Las marcada como ‚Äúscots‚Äù son canciones en ingl√©s. Las que supuestamente est√°n en catal√°n o romano son canciones instrumentales que el paquete genius no parece procesas correctamente. La que est√° en ‚Äúportugu√©s‚Äù es Te quiero, Puta de Rammstein que est√°, obviamente, en espa√±ol. Finalmente, Lacrimosa efectivamente tiene una canci√≥n que est√° en finland√©s.&lt;/p&gt;
&lt;p&gt;Cabe notar que como las canciones son poes√≠a no tienen oraciones marcadas con punto. Tuve que asumir que cada verso es una oraci√≥n.&lt;/p&gt;
&lt;p&gt;Otra limitaci√≥n importante es que estas medidas de legibilidad est√°n pensadas para prosa, no para poes√≠a, por lo que su validez en este caso no est√° garantizada.&lt;/p&gt;
&lt;p&gt;Con esto, computo la legibiliad √∫nicamente de las canciones en alem√°n.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;full_lyrics[language == &amp;quot;german&amp;quot;, 
            &amp;quot;SMOG&amp;quot; := quanteda::textstat_readability(lyric, measure = &amp;quot;SMOG.de&amp;quot;)$SMOG.de]

full_lyrics %&amp;gt;%  
   .[language %in% &amp;quot;german&amp;quot;] %&amp;gt;% 
   ggplot(aes(SMOG)) +
   geom_density(aes(color = artist)) +
   geom_rug(aes(color = artist)) +
   scale_color_brewer(&amp;quot;Artist&amp;quot;, palette = &amp;quot;Set1&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;../../post/2019-11-20-rammstein-vs-lacrimosa_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Mh.. ü§î. Hip√≥tesis confirmada? Las letras de Rammstein definitivamente son m√°s bien simplonas. Aunque ojo, ya que las tres canciones m√°s complejas son de Rammstein. Esto es un poco enga√±oso, quiz√°s. Esta es la canci√≥n m√°s compleja:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;full_lyrics[which.max(SMOG)] %&amp;gt;% 
   with(cat(lyric))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Bewahret einander vor Herzeleid.
## Denn kurz ist die Zeit die ihr beisammen seid.
## Denn wenn euch auch viele Jahre vereinen.
## Einst werden sie wie Minuten euch scheinen.
## Herzeleid.
## Bewahret einander vor der Zweisamkeit&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Herzeleid es bastante corta (en t√©rminos de letra) y no es tan terriblemente complicada. Pero s√≠ tiene varias palabras largas. Ir√≥nicamente la letra proviene de un poema tradicional que puede encontrarse colgado en muchas casas.&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;../../post/2019-11-20-rammstein-vs-lacrimosa_files/herzeleid.png&#34; alt=&#34;Poema Herzeleid&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;Poema Herzeleid&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Algo similar para con la segunda canci√≥n m√°s compleja (Zeig dich) que est√° compuesta casi exclusivamente por versos de dos palabras. Esto no me da demasiada confianza en estos resultados. Pero si vemos el otro extremo, todo tiene m√°s sentido:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;full_lyrics[which.min(SMOG)] %&amp;gt;% 
   with(cat(lyric))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Du, du hast, du hast mich.
## Du, du hast, du hast mich.
## Du, du hast, du hast mich.
## Du, du hast, du hast mich.
## Du, du hast, du hast mich, du hast mich.
## Du hast mich gefragt, du hast mich gefragt.
## Du hast mich gefragt und ich hab&amp;#39; nichts gesagt.
## Willst du bis der Tod euch scheidet.
## Treu ihr sein f√ºr alle Tage?(Ja) Nein.
## (Ja) Nein.
## Willst du bis zum Tod, der scheide.
## Sie lieben auch in schlechten Tagen?(Ja) Nein.
## (Ja) Nein.
## Du, du hast, du hast mich.
## Du, du hast, du hast mich.
## Du, du hast, du hast mich, du hast mich.
## Du hast mich gefragt, du hast mich gefragt.
## Du hast mich gefragt und ich hab&amp;#39; nichts gesagt.
## Willst du bis der Tod euch scheidet.
## Treu ihr sein f√ºr alle Tage?(Ja) Nein.
## (Ja) Nein.
## Willst du bis zum Tod, der scheide.
## Sie lieben auch in schlechten Tagen?(Ja) Nein.
## (Ja) Nein.
## Willst du bis der Tod euch scheidet.
## Treu ihr sein(Ja) Nein.
## (Ja) Nein&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;La canci√≥n m√°s simple es Du hast. Completamente comprensible ya que es una canci√≥n bastate ‚Äúboba‚Äù, al menos en lo que respecta a legibilidad. Tiene versos muy cortos, con palabras muy cortas y una estructura muy simple. Lo que el valor SMOG no captura es que que adem√°s es tremendamente repetitiva. Pr√°cticamente tiene s√≥lo 3 estrofas distintas!&lt;/p&gt;
&lt;p&gt;Esto resuena con mi exepriencia con ambas bandas. Rammstein sigue la estructura tradicional de canciones con estribillos, estrofas y puentes, mientras que Lacrimosa no tiene problema en usar letras m√°s parecidas a la prosa, con poca repetici√≥n. Por ejemplo, &lt;a href=&#34;https://www.youtube.com/watch?v=qdzI88X4YZk&#34;&gt;Der Strasse der Zeit&lt;/a&gt; directamente no tiene estribillo y contando la proporci√≥n de estrofas √∫nicas se puede ver que s√≥lo 7% de las l√≠neas se repiten.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;albums[track_title == &amp;quot;Die Strasse der Zeit&amp;quot;] %&amp;gt;% 
   .[, mean(duplicated(lyric))]&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 0.07017544&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Y esto se puede extender a todas las canciones de la discograf√≠a de cada banda:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;albums %&amp;gt;% 
   .[, .(repetition = mean(duplicated(lyric)), .N), by = .(track_title, artist)] %&amp;gt;% 
   ggplot(aes(repetition)) +
   geom_density(aes(color = artist)) +
   geom_rug(aes(color = artist)) +
   scale_color_brewer(&amp;quot;Artist&amp;quot;, palette = &amp;quot;Set1&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;../../post/2019-11-20-rammstein-vs-lacrimosa_files/figure-html/unnamed-chunk-10-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Guau! La diferencia es incre√≠ble. Mientras que Rammstein hace canciones con m√°s del 30% de su estrofas repetidas, muy pocas canciones de Lacrimosa repiten m√°s del 20% de sus l√≠neas. Es m√°s, hay una buena cantidad de canciones de Lacrimosa que no tienen absolutamente nada de repetici√≥n!&lt;/p&gt;
&lt;p&gt;Uniendo ambas medidas, aparece una distinci√≥n bastante clara.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;full_lyrics %&amp;gt;% 
   .[language == &amp;quot;german&amp;quot;] %&amp;gt;% 
   .[, repetition := mean(duplicated(strsplit(lyric, &amp;quot;.\n&amp;quot;)[[1]])), 
     by = .(track_title, artist)] %&amp;gt;% 
   ggplot(aes(repetition, SMOG)) +
   geom_point(aes(color = artist)) +
   geom_density_2d(aes(color = artist), adjust = 1.5, bins = 4) +
   scale_color_brewer(&amp;quot;Artist&amp;quot;, palette = &amp;quot;Set1&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;../../post/2019-11-20-rammstein-vs-lacrimosa_files/figure-html/unnamed-chunk-11-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Las canciones de Rammstein son generalmente m√°s simples y tienen much√≠sima m√°s repetici√≥n.&lt;/p&gt;
&lt;p&gt;No s√≥lo repiten l√≠neas a lo pavote, sino que los versos en las canciones de Rammstein muchas veces ni siquiera son oraci√≥nes completas. Esto se puede inferir usando el &lt;em&gt;log odds ratio&lt;/em&gt; entre ambos artistas para obtener pares de palabras caracter√≠sticamente ‚Äúrammsteinianos‚Äù vs ‚Äúlacrimosianos‚Äù.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;full_lyrics %&amp;gt;% 
   .[language == &amp;quot;german&amp;quot;] %&amp;gt;% 
   .[, tidytext::unnest_tokens(.SD, word, lyric, token = &amp;quot;ngrams&amp;quot;, n = 2), 
     by = .(track_title, artist)] %&amp;gt;% 
   .[, .N, by = .(word, artist)] %&amp;gt;% 
   .[!is.na(word)] %&amp;gt;% 
   tidylo::bind_log_odds(artist, word, N) %&amp;gt;% 
   .[order(-log_odds)] %&amp;gt;% 
   .[, .SD[1:10], by = artist] %&amp;gt;% 
   .[, word := tidytext::reorder_within(word, log_odds, artist)] %&amp;gt;% 
   ggplot(aes(word, log_odds)) +
   geom_col() +
   tidytext::scale_x_reordered() +
   coord_flip() +
   facet_wrap(~artist, scales = &amp;quot;free&amp;quot;) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;../../post/2019-11-20-rammstein-vs-lacrimosa_files/figure-html/unnamed-chunk-12-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Los pares de palabras que caracterizan a las letras de Lacrimosa son partes comunes de oraciones correctas, como ‚Äúso wie‚Äù (‚Äúcomo‚Äù) o ‚Äúdas ist‚Äù (‚Äúeso es‚Äù). Las de Rammstein, en cambio, se distinguen por repetir palabras sin estructura sint√°ctica, como ‚Äúbang bang‚Äù, ‚Äúlink zwo‚Äù (‚Äúizquierda dos‚Äù; el verso completo es ‚Äúizquierda dos tres cuatro‚Äù) y ‚Äúzwiter zwiter‚Äù.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;simpleza-falta-de-calidad&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Simpleza ‚â† falta de calidad&lt;/h2&gt;
&lt;p&gt;Me divert√≠ un poco aprendiendo estas herramientas b√°sicas para la manipulaci√≥n de datos textuales, pero no hay nada revolucionario en la conclusi√≥n de que las letras de Rammstein son m√°s imples y m√°s ‚Äúcancioneras‚Äù que las de Lacrimosa. No hace falta webscapping ni R, s√≥lo es necesario poder escuchar m√∫sica.&lt;/p&gt;
&lt;p&gt;M√°s importane, nada dice que letras m√°s largas y m√°s complicadas impliquen mejores canciones. Bajo cualqueir medida, Du hast es terriblemnete simple, pero se basa en un juego de palabras interesante y en romper las expectativas.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;footnotes&#34;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&#34;fn1&#34;&gt;&lt;p&gt;Tambi√©n hay un paquete llamado &lt;a href=&#34;https://github.com/ewenme/geniusr&#34;&gt;geniusr&lt;/a&gt; que usa la API oficial de Genius. Es preferible usar ese para uso m√°s intensivo. Lo descubr√≠ cuando ya hab√≠a escrito casi todo el c√≥digo, as√≠ que no lo cambi√©.&lt;a href=&#34;#fnref1&#34; class=&#34;footnote-back&#34;&gt;‚Ü©&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>