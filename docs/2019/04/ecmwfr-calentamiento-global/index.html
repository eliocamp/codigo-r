

  
    
  


  




  


  

<!DOCTYPE html>
<html lang="es-es">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.56.3 with theme Tranquilpeak 0.4.3-BETA">
    <title>Midiendo el calentamiento global con ecmwfr</title>
    <meta name="author" content="Elio Campitelli">
    <meta name="keywords" content=", R">

    <link rel="icon" href="../../../favicon.png">
    

    
    <meta name="description" content="Para mi investigaci√≥n necesitaba bajar datos meteorol√≥gicos grillados del ERA-Interim, que es una base de datos generada por el ECMWF. Bajar los datos en su sitio web es muy inc√≥mido y requiere muchos clicks. Por suerte, me encontr√© con el paquete ecmwfr con el que pude bajar los datos directamente desde R y muy f√°cilmente. Una de las cosas geniales del c√≥digo abierto, es que los usuarios pueden ser colaboradores, as√≠ que suger√≠ algunas cosas y aport√© un poco de c√≥digo.">
    <meta property="og:description" content="Para mi investigaci√≥n necesitaba bajar datos meteorol√≥gicos grillados del ERA-Interim, que es una base de datos generada por el ECMWF. Bajar los datos en su sitio web es muy inc√≥mido y requiere muchos clicks. Por suerte, me encontr√© con el paquete ecmwfr con el que pude bajar los datos directamente desde R y muy f√°cilmente. Una de las cosas geniales del c√≥digo abierto, es que los usuarios pueden ser colaboradores, as√≠ que suger√≠ algunas cosas y aport√© un poco de c√≥digo.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Midiendo el calentamiento global con ecmwfr">
    <meta property="og:url" content="/2019/04/ecmwfr-calentamiento-global/">
    <meta property="og:site_name" content="C√≥digo R">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="C√≥digo R">
    <meta name="twitter:description" content="Para mi investigaci√≥n necesitaba bajar datos meteorol√≥gicos grillados del ERA-Interim, que es una base de datos generada por el ECMWF. Bajar los datos en su sitio web es muy inc√≥mido y requiere muchos clicks. Por suerte, me encontr√© con el paquete ecmwfr con el que pude bajar los datos directamente desde R y muy f√°cilmente. Una de las cosas geniales del c√≥digo abierto, es que los usuarios pueden ser colaboradores, as√≠ que suger√≠ algunas cosas y aport√© un poco de c√≥digo.">
    
      <meta name="twitter:creator" content="@d_olivaw">
    
    

    
    

    
      <meta property="og:image" content="//www.gravatar.com/avatar/2376976935665241d1fd5a1fb8124a81?s=640">
    

    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="../../../css/style-jsjn0006wyhpyzivf6yceb31gvpjatbcs3qzjvlumobfnugccvobqwxnnaj8.min.css" />
    
    
      
        <link rel="stylesheet"  href="../../../css/custom.css">
      
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="2">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="../../../">C√≥digo R</a>
  </div>
  
    
      <a class="header-right-picture "
         href="../../../#about">
    
    
    
      
        <img class="header-picture" src="//www.gravatar.com/avatar/2376976935665241d1fd5a1fb8124a81?s=90" alt="Foto de autor" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="2">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="../../../#about">
          <img class="sidebar-profile-picture" src="//www.gravatar.com/avatar/2376976935665241d1fd5a1fb8124a81?s=110" alt="Foto de autor" />
        </a>
        <h4 class="sidebar-profile-name">Elio Campitelli</h4>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Inicio</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categor√≠as</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archivos</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">Acerca de</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/eliocamp">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.r-bloggers.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">R-Bloggers</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://twitter.com/d_olivaw">
    
      <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="2"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      Midiendo el calentamiento global con ecmwfr
    </h1>
  
  

    
        In English: <a href="../../../en/2019/04/ecmwfr-global-warming/">Using ecmwfr to measure global warming</a>
    


  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2019-04-19T00:00:00Z">
        
  Abril 19, 2019

      </time>
    
    
  
  
    <span>en</span>
    
      <a class="category-link" href="../../../categories/r">R</a>
    
  

  </div>

</div>



<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    });
    </script>
    <script type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              


<p>Para mi investigaci√≥n necesitaba bajar datos meteorol√≥gicos grillados del ERA-Interim, que es una base de datos generada por el <a href="https://www.ecmwf.int/">ECMWF</a>. Bajar los datos en su sitio web es <strong>muy</strong> inc√≥mido y requiere <strong>muchos</strong> clicks. Por suerte, me encontr√© con el paquete <a href="https://github.com/khufkens/ecmwfr">ecmwfr</a> con el que pude bajar los datos directamente desde R y muy f√°cilmente. Una de las cosas geniales del c√≥digo abierto, es que los usuarios pueden ser colaboradores, as√≠ que suger√≠ algunas cosas y aport√© un poco de c√≥digo.</p>
<p>Ahora, una nueva versi√≥n est√° de camino a CRAN, as√≠ que quer√≠a mostrar un peque√±o ejemplo de lo que se puede hacer con el paquete.</p>
<p>Para bajar datos de los servidores del ECMWF hace falta tener una cuenta. Si van a seguir estos pasos, antes que nada van a tener que crearse una y agregar la key del API al keyring de ecmwfr. Esto se hace todo interactivamente con este comando:</p>
<pre class="r"><code>library(ecmwfr)

wf_set_key(service = &quot;webapi&quot;)</code></pre>
<p>Eso los lleva a la URL correcta donde pueden conseguir la clave y despu√©s configura todo para usarla.</p>
<p>Lo segundo que hace fatla es un <em>request</em> v√°lido. Como la API tiene un mont√≥n de dataset distintos, con distinta resoluci√≥n temporal y otras propiedades, armar uno desde cero es m√°s bien complicado. Es preferible ir <a href="https://apps.ecmwf.int/datasets/">a la p√°gina</a> y usar su interfaz para crear un <em>request</em> b√°sico del dataset de interes. En mi caso, voy a usar datos mensuales de <a href="https://apps.ecmwf.int/datasets/data/interim-full-daily/levtype=sfc/">ERA Interim</a>.</p>
<div class="figure">
<img src="../../../post/2019-04-19-como-cambio-el-tiempo-desde-que-naci_files/webapi-erainterim.png" alt="ERA Interim request" />
<p class="caption">ERA Interim request</p>
</div>
<p>Se puede ver que no hay forma alguna de descargar todos los a√±os usando la interfaz web. Pero abajo dse todo hay un bot√≥n que dice ‚ÄúView the MARS request‚Äù.</p>
<div class="figure">
<img src="../../../post/2019-04-19-como-cambio-el-tiempo-desde-que-naci_files/webapi-erainterim2.png" alt="ERA Interim MARS" />
<p class="caption">ERA Interim MARS</p>
</div>
<p>Y eso provee el texto del <em>request</em> que despu√©s voy a modificar un poco. En R, convierto este template en una lista usando la addin de RStudio ‚ÄúMARS to list‚Äù (pero si quieren peuden hacerlo a mano). Agregu√© <code>format  = &quot;netcdf&quot;</code> al final para que me devuelva todo en formato NetCDF.</p>
<p>Despu√©s le paso esa lista a la funci√≥n <code>wf_archetype()</code>.</p>
<pre class="r"><code>ERAI_monthly &lt;- wf_archetype(
   request = list(
      class   = &quot;ei&quot;,
      dataset = &quot;interim&quot;,
      date    = &quot;19790101/19790201/19790301/19790401/19790501/19790601/19790701/19790801/19790901/19791001/19791101/19791201&quot;,
      expver  = &quot;1&quot;,
      grid    = &quot;0.75/0.75&quot;,
      levtype = &quot;sfc&quot;,
      param   = &quot;167.128&quot;,
      stream  = &quot;moda&quot;,
      type    = &quot;an&quot;,
      target  = &quot;output&quot;,
      format  = &quot;netcdf&quot;),
   dynamic_fields = c(&quot;date&quot;, &quot;grid&quot;, &quot;target&quot;))</code></pre>
<p>Esto me crea una funci√≥n (que llam√© ‚ÄúERAI_monthly‚Äù) con argumentos ‚Äúdate‚Äù, ‚Äúgrid‚Äù and ‚Äútarget‚Äù. No cambio la lista a mano porque quiero estar seguro de siempre tener un <em>request</em> v√°lido que apunte a ERA Interim. Para este peque√±o ejemplo es medio mucho, pero es √∫til para usar en un proyecto m√°s grande.</p>
<p>Una cosa a notar es que el formato de las fechas es bastante largo. Voy a armarme una funci√≥n que haga el trabajo pesado por m√≠.</p>
<pre class="r"><code>format_dates &lt;- function(dates) {
   dates &lt;- as.Date(dates)
   paste0(lubridate::year(dates),
          formatC(lubridate::month(dates), width = 2, flag = &quot;0&quot;),
          formatC(lubridate::day(dates), width = 2, flag = &quot;0&quot;),
          collapse = &quot;/&quot;)
}

format_dates(c(&quot;2018-01-01&quot;, &quot;2018-02-01&quot;))</code></pre>
<pre><code>## [1] &quot;20180101/20180201&quot;</code></pre>
<p>Ahora estoy listo para descargar los datos! Como nac√≠ en agosto de 1988, voy a ver c√≥mo aument√≥ la temperatura media de ese mes desde ese a√±o. Y como no me interesan mucho los detalles locales, voy a usar una resoluci√≥n de 3¬∞ por 3¬∞.</p>
<pre class="r"><code>dates &lt;- seq.Date(as.Date(&quot;1988-08-01&quot;), as.Date(&quot;2018-08-01&quot;), &quot;1 year&quot;)

my_request &lt;- ERAI_monthly(date = format_dates(dates), 
                           grid = &quot;3/3&quot;,
                           target = &quot;august_monthly.nc&quot;)
str(my_request)</code></pre>
<pre><code>## List of 11
##  $ class  : chr &quot;ei&quot;
##  $ dataset: chr &quot;interim&quot;
##  $ date   : chr &quot;19880801/19890801/19900801/19910801/19920801/19930801/19940801/19950801/19960801/19970801/19980801/19990801/200&quot;| __truncated__
##  $ expver : chr &quot;1&quot;
##  $ grid   : chr &quot;3/3&quot;
##  $ levtype: chr &quot;sfc&quot;
##  $ param  : chr &quot;167.128&quot;
##  $ stream : chr &quot;moda&quot;
##  $ type   : chr &quot;an&quot;
##  $ target : chr &quot;august_monthly.nc&quot;
##  $ format : chr &quot;netcdf&quot;</code></pre>
<p>Y con esto, uso <code>wf_request()</code> para bajar los datos. Esto puede llevar su tiempo. No porque el archivo sea muy pesado (para nada, s√≥lo 455kb), sino porque el servidor tiene que procesar el <em>request</em> y unir todos los datos. Si est√°n siguiendo esto desde su casa, √©ste es el momento para ir a hacere un t√© o, en mi caso, un mate. üçµ</p>
<pre class="r"><code>wf_request(request = my_request,
           user = &quot;eliocampitelli@gmail.com&quot;, 
           transfer = TRUE,
           path = &quot;data&quot;, 
           verbose = FALSE)</code></pre>
<p>Ahora que tengo mis datos en ‚Äúaugust_monthly.nc‚Äù, s√≥lo necesito cargarlo en memoria para analizarlo. Voy a usar mi paquete <a href="https://eliocamp.github.io/metR/">metR</a>.</p>
<pre class="r"><code>library(metR)
library(ggplot2)
library(data.table)</code></pre>
<pre class="r"><code>august_temp &lt;- ReadNetCDF(&quot;data/august_monthly.nc&quot;)</code></pre>
<p>Primero, mirar un poco la estructura de los datos.</p>
<pre class="r"><code>str(august_temp)</code></pre>
<pre><code>## Classes &#39;data.table&#39; and &#39;data.frame&#39;:   226920 obs. of  4 variables:
##  $ longitude: int  0 3 6 9 12 15 18 21 24 27 ...
##  $ latitude : int  90 90 90 90 90 90 90 90 90 90 ...
##  $ t2m      : num  273 273 273 273 273 ...
##  $ time     : POSIXct, format: &quot;1988-08-01&quot; &quot;1988-08-01&quot; ...
##  - attr(*, &quot;.internal.selfref&quot;)=&lt;externalptr&gt;</code></pre>
<p>Es un data frame con un valor de <code>t2m</code> para cada longitud, latitud y tiempo. La temperatura est√° en Kelvin. Quiero ver un campo; el primero.</p>
<pre class="r"><code># mapa
world &lt;- list(geom_path(data = map_data(&quot;world2&quot;), 
                        aes(long, lat, group = group), 
                        size = 0.2, color = &quot;gray50&quot;),
              coord_quickmap(),
              scale_x_longitude(),
              scale_y_latitude())

ggplot(august_temp[time == time[1]], aes(longitude, latitude)) +
   geom_contour_fill(aes(z = t2m - 273.15)) +
   world +
   scale_fill_divergent(&quot;Temperatura a 2m (¬∞C)&quot;) +
   metR:::theme_field()</code></pre>
<p><img src="../../../post/2019-04-19-como-cambio-el-tiempo-desde-que-naci_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>Los tr√≥picos son m√°s c√°lidos que los polos, como debe ser.</p>
<p>Luego de conocer los datos, voy a computar la tendencia lineal de la temperatura para cada punto de grilla. Estoy usando una forma <strong>muy bruta</strong> para evaluar la significancia estad√≠stica.</p>
<pre class="r"><code>trends &lt;- august_temp[, FitLm(year = year(time), t2m, se = TRUE), 
                      by = .(longitude, latitude)] 
trends[, p.value :=  pt(abs(estimate)/std.error, df, lower.tail = FALSE)]

ggplot(trends[term == &quot;year&quot;], aes(longitude, latitude)) +
   geom_contour_fill(aes(z = estimate*10), 
                     breaks = AnchorBreaks(0, 0.25, exclude = 0)) +
   stat_subset(aes(subset = p.value &lt;= 0.01), 
               geom = &quot;point&quot;, size = 0.1, alpha = 0.5) +
   world +
   scale_fill_divergent(&quot;Tendencia de temperatura a 2m \n (¬∞C/d√©cada)&quot;) +
   metR:::theme_field() +
   labs(subtitle = &quot;Cambio de la temperatura media de agosto 1988-2018&quot;, 
        caption = &quot;Datos: ERA Interim&quot;)</code></pre>
<p><img src="../../../post/2019-04-19-como-cambio-el-tiempo-desde-que-naci_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>No es sorprendente que la tendencia sea positiva en casi todos lados, aunque no es estad√≠sticamente significativa siempre (usando este m√©todo <strong>muy bruto</strong>). Notablemente, la temperatura de agosto no aument√≥ mucho donde yo vivo.</p>
<p>Voy a construir (a lo bruto) una serie temporal de temperatura media global de agosto promediando todos los puntos de grilla para cada a√±o (usando como peso el coseno de la latitud).</p>
<pre class="r"><code>gmat &lt;- august_temp[, .(t2m = weighted.mean(t2m, cos(latitude*pi/180))), 
                   by = year(time)]

ggplot(gmat, aes(year, t2m - 273.15)) +
   geom_line() +
   geom_smooth(method = &quot;lm&quot;) +
   scale_y_continuous(&quot;Temperatura media a 2m global de agosto (¬∞C)&quot;) +
   hrbrthemes::theme_ipsum_rc()</code></pre>
<p><img src="../../../post/2019-04-19-como-cambio-el-tiempo-desde-que-naci_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>De nuevo, no sorprende a nadie que la temperatura global est√° aumentando. Voy a calcular la tasa de aumento.</p>
<pre class="r"><code>trend &lt;- lm(t2m ~ I(year/10), data = gmat)
summary(trend)</code></pre>
<pre><code>## 
## Call:
## lm(formula = t2m ~ I(year/10), data = gmat)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -0.28121 -0.05954 -0.01535  0.06890  0.28129 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 255.78307    4.71318  54.270  &lt; 2e-16 ***
## I(year/10)    0.16756    0.02353   7.121 7.77e-08 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.1172 on 29 degrees of freedom
## Multiple R-squared:  0.6362, Adjusted R-squared:  0.6236 
## F-statistic: 50.71 on 1 and 29 DF,  p-value: 7.772e-08</code></pre>
<p>La tendencia (1.68 ¬∞C/d√©cada) es consistente con <a href="https://www.ipcc.ch/site/assets/uploads/2018/02/AR5_SYR_FINAL_SPM.pdf">estimaciones mejores</a>. üî•</p>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">ETIQUETADO EN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="../../../tags/ejemplos/">ejemplos</a>

  <a class="tag tag--primary tag--small" href="../../../tags/paquetes/">paquetes</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../2019/10/lo-que-aprend%C3%AD-en-latinr-2019/" data-tooltip="Lo que aprend√≠ en LatinR 2019">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">SIGUIENTE</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../2019/01/metamerismo-estad%C3%ADstico/" data-tooltip="Metamerismo estad√≠stico">
              
                  <span class="hide-xs hide-sm text-small icon-mr">ANTERIOR</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/2019/04/ecmwfr-calentamiento-global/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/2019/04/ecmwfr-calentamiento-global/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=/2019/04/ecmwfr-calentamiento-global/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2022 Elio Campitelli. Todos los derechos reservados
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="2">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../2019/10/lo-que-aprend%C3%AD-en-latinr-2019/" data-tooltip="Lo que aprend√≠ en LatinR 2019">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">SIGUIENTE</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../2019/01/metamerismo-estad%C3%ADstico/" data-tooltip="Metamerismo estad√≠stico">
              
                  <span class="hide-xs hide-sm text-small icon-mr">ANTERIOR</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/2019/04/ecmwfr-calentamiento-global/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/2019/04/ecmwfr-calentamiento-global/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=/2019/04/ecmwfr-calentamiento-global/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="2">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=%2F2019%2F04%2Fecmwfr-calentamiento-global%2F">
          <i class="fa fa-facebook-official"></i><span>Compartir en Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=%2F2019%2F04%2Fecmwfr-calentamiento-global%2F">
          <i class="fa fa-twitter"></i><span>Compartir en Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=%2F2019%2F04%2Fecmwfr-calentamiento-global%2F">
          <i class="fa fa-google-plus"></i><span>Compartir en Google&#43;</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="//www.gravatar.com/avatar/2376976935665241d1fd5a1fb8124a81?s=110" alt="Foto de autor" />
    
    <h4 id="about-card-name">Elio Campitelli</h4>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Atmospheric sciences graduate researcher at CONICET
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Argentina
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="Buscar" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center">no se encontraron art√≠culos</div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../2022/07/plumber-heroku/">
                <h3 class="media-heading">Como crear una API con plumber y hostearla en Heroku</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2022
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Uno de los subproductos de mi tesis de doctorado es la descomposici√≥n del √≠ndice del SAM (un indicador del estado de la atm√≥sfera muy usado y monitoreado) en dos partes que tienen distintas propiedades e impactos.
Como investigadore, yo s√© que para para que un √≠ndice de adopte, √©ste tiene que ser f√°cil de descargar de manera actualizada. Por esto es que estoy armando una p√°gina con gr√°ficos y acceso a los datos actualizados mensualmente.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../2021/07/wrapper-stop/">
                <h3 class="media-heading">C√≥mo maniuplar mensajes de error</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2021
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">La funci√≥n stop() permite terminar la ejecuci√≥n de una funci√≥n si hay alg√∫n problema mortal.
Por ejemplo, imaginemos este c√≥digo que calcula la raziz cuadrada de un n√∫mero pero s√≥lo si el n√∫mero de entrada es positivo.
raiz_real &lt;- function(x) { if (x &lt; 0) { stop(&quot;&#39;x&#39; no puede ser negativo.&quot;) } sqrt(x) } raiz_real(2) ## [1] 1.414214 raiz_real(-2) ## Error in raiz_real(-2): &#39;x&#39; no puede ser negativo. Si x es negativo, la funci√≥n tira un error.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../2021/05/r-pipa-nativa/">
                <h3 class="media-heading">La nueva pipa</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2021
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Este post quiz√°s llega un poco tarde pero hace poco sali√≥ la versi√≥n 4.1.0 de R. Y si la versi√≥n 4.0.0 hizo noticia con el revolucionario cambio de stringAsFactors = FALSE, la gran novedad de esta siguiente versi√≥n es la implementaci√≥n de una ‚Äúpipa‚Äù nativa.
La nueva pipa La ‚Äúpipa‚Äù (traducci√≥n no muy buena de ‚Äúpipe‚Äù en ingl√©s) es una de las principales distinciones del c√≥digo que usa tidyverse / dplyr.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../2021/03/star-trek-rakings/">
                <h3 class="media-heading">Analizando ratings de Star Trek en IMDB</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Mar 3, 2021
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Con mi novia estamos viendo Star Trek: The Next Generation. La primera temporada es bastante mala, pero luego remonta. Me dio curiosidad si los ratings mostraban eso. Entonces empec√© a bajar los ratings de cada cap√≠tulo en IMDB. En el medio, me encontr√© que IMDB provee ratings promedio por demograf√≠a, as√≠ que decid√≠ tambi√©n bajar eso.
Y ya que estamos, baj√© tambi√©n los ratings de las otras series de Star Trek.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../2019/12/rammbot-un-bot-que-crea-canciones-de-rammstein/">
                <h3 class="media-heading">Obligu√© a un bot a escuchar m√°s de 1000 horas de Rammstein y le ped√≠ que escribiera una canci√≥n propia.</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Dec 12, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Cuando le cont√© a una amiga que hab√≠a analizado las letras de Rammstein y Lacrimosa, me tir√≥ la idea de usar un modelo para crear letras de las bandas. Me pareci√≥ una idea divertida, as√≠ que ac√° tienen el futuro de la m√∫sica:
library(data.table) library(magrittr) Igual que hice antes, bajo las letras de losdiscos de estudio de cada artista. Guardo las cosas en un archivo para no tener que bajar los datos cada vez que corro esto.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../2019/11/rammstein-vs-lacrimosa/">
                <h3 class="media-heading">Rammstein vs. Lacrimosa</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Hace un tiempo una conocida twite√≥ que hab√≠a tenido que comprarse un libro entero para aprender los g√©neros gramaticales del alem√°n. Entre las repuestas, hab√≠a una persona que contaba que de adolescente crey√≥ (err√≥neamente) que podr√≠a aprender alem√°n s√≥lo escuchando Rammstein. Habeindo estudiado unos drei Jahre de alem√°n al mismo tiempo que escuchaba Rammstein y otras bandas en alem√°n, las letras de Rammstein siempre me parecieron extremadamente simples.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../2019/10/lo-que-aprend%C3%AD-en-latinr-2019/">
                <h3 class="media-heading">Lo que aprend√≠ en LatinR 2019</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Hace unas semanas volv√≠ de Santiago de Chile luego de ir a Latinr 2019. Igual que el a√±o pasado, fue una experiencia divertida. Estas son algunas de las cosas que me llamaron la atenci√≥n.
Workshops A la ma√±ana del primer d√≠a asist√≠ al workshop de Mine √áetinkaya-Rundel sobre ense√±anza de R. Ejemplific√≥ algunos principios b√°sicos a la hora de dise√±ar clases. La idea de ‚Äúdejales comer el pastel primero‚Äù creo que es la principal ense√±anza.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../2019/04/ecmwfr-calentamiento-global/">
                <h3 class="media-heading">Midiendo el calentamiento global con ecmwfr</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Para mi investigaci√≥n necesitaba bajar datos meteorol√≥gicos grillados del ERA-Interim, que es una base de datos generada por el ECMWF. Bajar los datos en su sitio web es muy inc√≥mido y requiere muchos clicks. Por suerte, me encontr√© con el paquete ecmwfr con el que pude bajar los datos directamente desde R y muy f√°cilmente. Una de las cosas geniales del c√≥digo abierto, es que los usuarios pueden ser colaboradores, as√≠ que suger√≠ algunas cosas y aport√© un poco de c√≥digo.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../2019/01/metamerismo-estad%C3%ADstico/">
                <h3 class="media-heading">Metamerismo estad√≠stico</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jan 1, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">El paquete <a href="https://github.com/eliocamp/metamer">metamer</a> implementa en R el algoritmo descripto por Matejka y Fitzmaurice (2017) para generar sets de datos distintos entre s√≠ pero con estad√≠sticos id√©nticos. Adem√°s, propongo el nombre &ldquo;met√°meros&rdquo; para estos grupos de datos en analog√≠a con el concepto proveniente de colorimetr√≠a.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../2018/10/leyendo-informacion-incucai/">
                <h3 class="media-heading">Leyendo informaci√≥n del INCUCAI</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">El otro d√≠a el diario Clar√≠n sac√≥ una nota afirmando que el pasado agosto se hab√≠a dado el r√©cord hist√≥rico de transplantes de √≥rganos y se lo adjudicaba a la &ldquo;Ley Justina&rdquo;, que establece que todos somos donantes presuntos a menos que se declare lo contrario en vida. Dado que esta ley se aprob√≥ hace poco m√°s de un mes y todav√≠a no est√° reglamentada, es poco probable que este r√©cord se deba al cambio legal.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero="no se encontraron art√≠culos"
         data-message-one="1 art√≠culo encontrado"
         data-message-other="{n} art√≠culos encontrados">
         25 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('https://github.com/eliocamp/codigo-r/raw/master/static/images/cover2.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js" integrity="sha256-XrZQp+ZMfovqr6Hb2M6okHvSEYaB/+Xbx7toWmOOZUM=" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-light.min.css" integrity="sha256-KacbO6Nou2geGJEUzQeKzKEdp/DENVGJKAd2v37moh0=" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="../../../js/script-qi9wbxp2ya2j6p7wx1i6tgavftewndznf4v0hy2gvivk1rxgc3lm7njqb6bz.min.js"></script>



<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
      <script>
        var disqus_config = function () {
          this.page.url = '\/2019\/04\/ecmwfr-calentamiento-global\/';
          
            this.page.identifier = '\/2019\/04\/ecmwfr-calentamiento-global\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'codigo-r';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  



    
  </body>
</html>

