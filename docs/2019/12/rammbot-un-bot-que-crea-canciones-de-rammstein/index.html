

  
    
  


  




  


  

<!DOCTYPE html>
<html lang="es-es">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.56.3 with theme Tranquilpeak 0.4.3-BETA">
    <title>Obligu√© a un bot a escuchar m√°s de 1000 horas de Rammstein y le ped√≠ que escribiera una canci√≥n propia.</title>
    <meta name="author" content="Elio Campitelli">
    <meta name="keywords" content="tech, R">

    <link rel="icon" href="../../../favicon.png">
    

    
    <meta name="description" content="Cuando le cont√© a una amiga que hab√≠a analizado las letras de Rammstein y Lacrimosa, me tir√≥ la idea de usar un modelo para crear letras de las bandas. Me pareci√≥ una idea divertida, as√≠ que ac√° tienen el futuro de la m√∫sica:
library(data.table) library(magrittr) Igual que hice antes, bajo las letras de losdiscos de estudio de cada artista. Guardo las cosas en un archivo para no tener que bajar los datos cada vez que corro esto.">
    <meta property="og:description" content="Cuando le cont√© a una amiga que hab√≠a analizado las letras de Rammstein y Lacrimosa, me tir√≥ la idea de usar un modelo para crear letras de las bandas. Me pareci√≥ una idea divertida, as√≠ que ac√° tienen el futuro de la m√∫sica:
library(data.table) library(magrittr) Igual que hice antes, bajo las letras de losdiscos de estudio de cada artista. Guardo las cosas en un archivo para no tener que bajar los datos cada vez que corro esto.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Obligu√© a un bot a escuchar m√°s de 1000 horas de Rammstein y le ped√≠ que escribiera una canci√≥n propia.">
    <meta property="og:url" content="/2019/12/rammbot-un-bot-que-crea-canciones-de-rammstein/">
    <meta property="og:site_name" content="C√≥digo R">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="C√≥digo R">
    <meta name="twitter:description" content="Cuando le cont√© a una amiga que hab√≠a analizado las letras de Rammstein y Lacrimosa, me tir√≥ la idea de usar un modelo para crear letras de las bandas. Me pareci√≥ una idea divertida, as√≠ que ac√° tienen el futuro de la m√∫sica:
library(data.table) library(magrittr) Igual que hice antes, bajo las letras de losdiscos de estudio de cada artista. Guardo las cosas en un archivo para no tener que bajar los datos cada vez que corro esto.">
    
      <meta name="twitter:creator" content="@d_olivaw">
    
    

    
    

    
      <meta property="og:image" content="//www.gravatar.com/avatar/2376976935665241d1fd5a1fb8124a81?s=640">
    

    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="../../../css/style-jsjn0006wyhpyzivf6yceb31gvpjatbcs3qzjvlumobfnugccvobqwxnnaj8.min.css" />
    
    
      
        <link rel="stylesheet"  href="../../../css/custom.css">
      
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="2">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="../../../">C√≥digo R</a>
  </div>
  
    
      <a class="header-right-picture "
         href="../../../#about">
    
    
    
      
        <img class="header-picture" src="//www.gravatar.com/avatar/2376976935665241d1fd5a1fb8124a81?s=90" alt="Foto de autor" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="2">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="../../../#about">
          <img class="sidebar-profile-picture" src="//www.gravatar.com/avatar/2376976935665241d1fd5a1fb8124a81?s=110" alt="Foto de autor" />
        </a>
        <h4 class="sidebar-profile-name">Elio Campitelli</h4>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Inicio</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categor√≠as</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archivos</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">Acerca de</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/eliocamp">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.r-bloggers.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">R-Bloggers</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://twitter.com/d_olivaw">
    
      <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="2"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      Obligu√© a un bot a escuchar m√°s de 1000 horas de Rammstein y le ped√≠ que escribiera una canci√≥n propia.
    </h1>
  
  


  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2019-12-24T00:00:00Z">
        
  Diciembre 24, 2019

      </time>
    
    
  
  
    <span>en</span>
    
      <a class="category-link" href="../../../categories/r">R</a>
    
  

  </div>

</div>



<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    });
    </script>
    <script type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              


<p>Cuando le cont√© a una amiga que <a href="../../../2019/11/rammstein-vs-lacrimosa/">hab√≠a analizado las letras de Rammstein y Lacrimosa</a>, me tir√≥ la idea de usar un modelo para crear letras de las bandas. Me pareci√≥ una idea divertida, as√≠ que ac√° tienen el futuro de la m√∫sica:</p>
<pre class="r"><code>library(data.table)
library(magrittr)</code></pre>
<p>Igual que hice antes, bajo las letras de losdiscos de estudio de cada artista. Guardo las cosas en un archivo para no tener que bajar los datos cada vez que corro esto. Adem√°s de bajar las letras, uso textcat para determinar el idioma de las letras (no todas est√°sn en alem√°n).</p>
<pre class="r"><code>lacrimosa &lt;- data.table(
  album = c(&quot;Angst&quot;, &quot;Einsemkeit&quot;, &quot;Satura&quot;, &quot;Inferno&quot;, &quot;Stille&quot;, &quot;Elodia&quot;, &quot;Fassade&quot;, &quot;Echos&quot;, 
            &quot;Lichtgestalt&quot;, &quot;Sehnsucht&quot;, &quot;Revolution&quot;, &quot;Hoffnung&quot;, &quot;Testimonium&quot;),
  year = c(1991, 1992, 1993, 1995, 1997, 1999, 2001, 2003,
           2005, 2009, 2012, 2015, 2017)
)

rammstein &lt;- data.table(
  album = c(&quot;Herzeleid&quot;, &quot;Sehnsucht&quot;, &quot;Mutter&quot;, &quot;Reise Reise&quot;, &quot;Rosenrot&quot;, 
            &quot;Liebe ist fur alle da&quot;,  &quot;Rammstein&quot;),
  year = c(1995, 1997, 2001, 2004, 2005, 2009, 2019)
)

albums &lt;- rbindlist(list(Lacrimosa = lacrimosa, 
                         Rammstein = rammstein), 
                    idcol = &quot;artist&quot;)
cache &lt;- here::here(&quot;content&quot;, &quot;post&quot;, &quot;data&quot;, &quot;letras.Rds&quot;)

if (file.exists(cache)) {
  lyrics &lt;- readRDS(cache)
} else {
  lyrics &lt;-  albums %&gt;% 
    genius::add_genius(artist, album) %&gt;% 
    as.data.table() %&gt;% 
    .[artist == &quot;Lacrimosa&quot; &amp; album == &quot;Sehnsucht&quot;, album := &quot;Sehnsucht (L)&quot;]  %&gt;% 
    .[, lang := textcat::textcat(paste0(lyric, collapse = &quot;\n&quot;)), by = .(track_title, artist)] %&gt;% 
    na.omit()
}</code></pre>
<p>Ahora a los bifes. El bot lo voy a hacer como una cadena de Markov. Lo que signfica es que toma una palabra y luego elije la siguiente al azar usando la probabilidad condicional de cada palabra. Es decir, ¬øcu√°l es la probabilidad de que a esta palabra le siga esta otra? Como ejemplo, voy a trabajar con las letras de Rammstein (y que est√©n en alem√°n) y a partir de eso voy a armar una funci√≥n generalizable.</p>
<pre class="r"><code>corpus &lt;- lyrics[lang == &quot;german&quot; &amp; artist == &quot;Rammstein&quot;]</code></pre>
<p>Para delimitar las estrofas voy a usar puntuaci√≥n. Entonces voy a primero detectar qu√© l√≠neas terminan con un punto, signo de pregunta o exlamaci√≥n y agregar un punto a las que NO terminan con puntuaci√≥n.</p>
<pre class="r"><code>corpus &lt;- corpus %&gt;% 
  .[, has_punct := grepl(&quot;^[\\w\\s]+[?.!]$&quot;, lyric, perl = TRUE)] %&gt;% 
  .[has_punct == FALSE, lyric := paste0(lyric, &quot;.&quot;)]</code></pre>
<p>Luego, con la magia de tidytext separo las palabras (sin eliminar la puntuaci√≥n), creo una columna que es la palabra siguiente y luego calculo, para cada par de palabras, la probabilida de que a una palabra le siga la otra.</p>
<pre class="r"><code>freq &lt;- corpus %&gt;% 
  tidytext::unnest_tokens(word, lyric, strip_punct = FALSE) %&gt;% 
  as.data.table()  %&gt;% 
  .[, next_word := shift(word, type = &quot;lead&quot;)] %&gt;% 
  na.omit() %&gt;% 
  .[, n_word := .N, by = .(word)] %&gt;%        # n√∫mero de veces que aparece la palabra (para normalizar)
  .[, .(n_next_word = .N, n_word = n_word[1]), by = .(word, next_word)] %&gt;% 
  .[, prob := n_next_word/n_word] %&gt;%                
  .[n_word &gt; 5] %&gt;%                          # me quedo con las palabras que aparecen m√°s de 5 veces
  .[order(-prob)]

head(freq)</code></pre>
<pre><code>##         word next_word n_next_word n_word prob
## 1: verderben         .          10     10    1
## 2:      boot         .           6      6    1
## 3:   riechst        so          14     14    1
## 4: hinterher         .           7      7    1
## 5:     sache       und           6      6    1
## 6:      jede     nacht           7      7    1</code></pre>
<p>Ahora, armo una funci√≥n que a partir de una palabra, selecciona la siguiente:</p>
<pre class="r"><code>next_word &lt;- function(prev_word) {
  if (prev_word %in% freq$word) {
    next_word &lt;- freq[word == prev_word] %&gt;% 
      .[, sample(next_word, size = 1, prob = prob)]   # Samplea 1 palabra sigiente usando la probabilidad calculada arriba
  } else {
    # Si la palabra no aparece...
    next_word &lt;- freq %&gt;% 
      .[, sample(word, 1)]        # Elegir cualquiera aleatoriametne pero seg√∫n su frecuencia. 
  }
  
  return(next_word)
}</code></pre>
<p>Por ejemplo,</p>
<pre class="r"><code>next_word(&quot;ich&quot;)</code></pre>
<pre><code>## [1] &quot;bin&quot;</code></pre>
<p>Ahora, sobre esa funcion, armo otra que a partir de una palabra inicial va agregando palabras hasta encontrarse con un signo de puntuaci√≥n (que indica que se termina el verso). Adem√°s, le agrego un truco recursivo por si la cadena de palabras se hace demasiado larga.</p>
<pre class="r"><code>verse &lt;- function(first_word = NULL, n_max = 20) {
  if (is.null(first_word)) {
    first_word &lt;- first_words[, sample(word, size = 1, prob = N)]
  }
  
  verse &lt;- tolower(first_word)
  word_candidate &lt;- verse
  
  end_verse &lt;- FALSE
  n &lt;- 1
  while(end_verse == FALSE &amp;&amp; n &lt; n_max) {
    word_candidate &lt;- next_word(word_candidate)
    
    if (n == 1) {
      verse &lt;- R.utils::capitalize(verse)
    }
    
    end_verse &lt;- grepl(&quot;[?.!]$&quot;, word_candidate, perl = TRUE)
    punctuation &lt;- grepl(&quot;[[:punct:]]&quot;, word_candidate)
    
    if (punctuation) {
      verse &lt;- paste0(verse, word_candidate)
    } else {
      verse &lt;- paste0(verse, &quot; &quot;, word_candidate)
    }
    n &lt;- n + 1
  }
  
  # Si no lleg√≥ a un final, volv√© a tratar. 
  if (n == n_max) {
    verse &lt;- verse(first_word = first_word, n_max = n_max)
  }
  verse
}</code></pre>
<p>Por ejemplo:</p>
<pre class="r"><code>verse(&quot;ich&quot;)</code></pre>
<pre><code>## Registered S3 method overwritten by &#39;R.oo&#39;:
##   method        from       
##   throw.default R.methodsS3</code></pre>
<pre><code>## [1] &quot;Ich nirgendwo schreien.&quot;</code></pre>
<p>¬øQu√© palabra puedo usar para empezar? En principio podr√≠a usar cualquiera que aparezca en el corpus, pero para hacer las cosas un poco m√°s f√°ciles voy a seleccionar especialmente palabras iniciales. Me voy a agarrar una lista de ‚Äúprimeras palabras‚Äù y computar tambi√©n su frecuencia.</p>
<pre class="r"><code>first_words &lt;- corpus %&gt;% 
  copy() %&gt;% 
  .[, id := 1:.N] %&gt;% 
  .[, tidytext::unnest_tokens(.SD, word, lyric, strip_punct = FALSE), by = id] %&gt;% 
  .[, .SD[1], by = id] %&gt;% 
  .[, .N, by = word]

head(first_words)</code></pre>
<pre><code>##         word  N
## 1:     wollt  4
## 2:       ihr 13
## 3: rammstein 25
## 4:      doch 46
## 5:       sex 11
## 6:     liebe 14</code></pre>
<pre class="r"><code>set.seed(43543) # para reproducibilidad
verse(first_words[, sample(word, 1, prob = N)])</code></pre>
<pre><code>## [1] &quot;Wir sind nicht.&quot;</code></pre>
<p>‚ÄúNo somos‚Äù. Mh‚Ä¶ profundo.</p>
<p>En fin. Ahora a empaquetar todo eso en una sola funci√≥n que crea un bot a partir de un corpus. La mayor√≠a del c√≥digo es el mismo de arriba. La funci√≥n que devuelve toma una semilla (opcional) y un n√∫mero de versos para generar una estrofa.</p>
<pre class="r"><code>make_lyric_bot &lt;- function(corpus) {
  corpus &lt;- as.data.table(na.omit(corpus))
  
  first_words &lt;- corpus %&gt;% 
    .[, id := 1:.N] %&gt;% 
    .[, tidytext::unnest_tokens(.SD, word, lyric, strip_punct = FALSE), by = id] %&gt;% 
    .[, .SD[1], by = id] %&gt;% 
    .[, .N, by = word]
  
  freq &lt;- corpus %&gt;% 
    copy() %&gt;% 
    .[, has_punct := grepl(&quot;^[\\w\\s]+[?.!]$&quot;, lyric, perl = TRUE)] %&gt;% 
    .[has_punct == FALSE, lyric := paste0(lyric, &quot;.&quot;)] %&gt;% 
    tidytext::unnest_tokens(word, lyric, strip_punct = FALSE) %&gt;% 
    as.data.table()  %&gt;% 
    .[, next_word := shift(word, type = &quot;lead&quot;)] %&gt;% 
    na.omit() %&gt;% 
    .[, n_word := .N, by = .(word)] %&gt;%               # n√∫mero de veces que aparece la palabra (para normalizar)
    .[, .(n_next_word = .N, n_word = n_word[1]), by = .(word, next_word)] %&gt;% 
    .[, prob := n_next_word/n_word] %&gt;%                
    .[n_word &gt; 5] %&gt;%                                    # me quedo con las palabras que aparecen m√°s de 5 veces
    .[order(-prob)]
  
  
  next_word &lt;- function(prev_word) {
    if (prev_word %in% freq$word) {
      next_word &lt;- freq[word == prev_word] %&gt;% 
        .[, sample(next_word, size = 1, prob = prob)]     # Samplea 1 palabra sigiente usando la probabilidad calculada arriba
    } else {
      # Si la palabra no aparece...
      next_word &lt;- freq %&gt;% 
        .[, sample(word, 1)]          # Elegir cualquiera aleatoriametne pero seg√∫n su frecuencia. 
    }
    
    return(next_word)
  }
  
  verse &lt;- function(first_word = NULL, n_max = 20) {
    if (is.null(first_word)) {
      first_word &lt;- first_words[, sample(word, size = 1, prob = N)]
    }
    
    verse &lt;- tolower(first_word)
    word_candidate &lt;- verse
    
    end_verse &lt;- FALSE
    n &lt;- 1
    while(end_verse == FALSE &amp;&amp; n &lt; n_max) {
      word_candidate &lt;- next_word(word_candidate)
      
      if (n == 1) {
        verse &lt;- R.utils::capitalize(verse)
      }
      
      end_verse &lt;- grepl(&quot;[?.!]$&quot;, word_candidate, perl = TRUE)
      punctuation &lt;- grepl(&quot;[[:punct:]]&quot;, word_candidate)
      
      if (punctuation) {
        verse &lt;- paste0(verse, word_candidate)
      } else {
        verse &lt;- paste0(verse, &quot; &quot;, word_candidate)
      }
      n &lt;- n + 1
    }
    
    # Si no lleg√≥ a un final, volv√© a tratar. 
    if (n == n_max) {
      verse &lt;- verse(first_word = first_word, n_max = n_max)
    }
    verse
  }
  
  function(seed = NULL, n = 4) {
    if (inherits(seed, &quot;lyric&quot;)) {
      seed &lt;-  attr(seed, &quot;seed&quot;)
      assign(&quot;.Random.seed&quot;, seed, globalenv())
      res &lt;- vapply(seq_len(n), function(x) verse(), &quot;a&quot;)
    } else if (is.null(seed)) {
      seed &lt;- get(&quot;.Random.seed&quot;, globalenv(), mode = &quot;integer&quot;, inherits = FALSE)   
      # set.seed(seed)
      res &lt;- vapply(seq_len(n), function(x) verse(), &quot;a&quot;)
    } else {
      res &lt;- withr::with_seed(seed, vapply(seq_len(n), function(x) verse(), &quot;a&quot;))      
    }
    
    attr(res, &quot;seed&quot;) &lt;- seed
    class(res) &lt;- c(&quot;lyric&quot;, class(res))
    return(res)
  }
}

print.lyric &lt;- function(x, ...) {
  x &lt;- paste(paste0(&quot;&gt; &quot;, x), collapse = &quot;   \n&quot;)
  cat(x)
}</code></pre>
<pre class="r"><code>lacribot &lt;- make_lyric_bot(lyrics[lang == &quot;german&quot; &amp; artist == &quot;Lacrimosa&quot;])
rammbot &lt;- make_lyric_bot(lyrics[lang == &quot;german&quot; &amp; artist == &quot;Rammstein&quot;])</code></pre>
<p>Ahora estas funciones generan estrofas pseudo-lacrimosa y pseudo-rammstein:</p>
<pre class="r"><code>rammbot(seed = 12345, n = 4)</code></pre>
<blockquote>
<p>Nur die ecke immer.<br />
Wir halten das bin alleine.<br />
Die asche.<br />
Mein teil‚Äì nein.</p>
</blockquote>
<p>Estas oraciones no aprobar√≠an una prueba de Alem√°n 1, pero si damos un poco de licencia po√©tica, imaginaci√≥n y agregando un poco de puntuaci√≥n se podr√≠a traducir a:</p>
<blockquote>
<p>S√≥lo la esquina, siempre.<br />
Creemos que estamos solos.<br />
Las cenizas.<br />
Mi parte - no.</p>
</blockquote>
<p>Un detalle curioso es que en alem√°n todos los sustantivos van en may√∫sculas pero en el procesamiento de los datos se las quit√©. Habr√≠a que cambiar el tokenizador para que no pase todo a m√≠n√∫sculas, pero bueno, ya est√°.</p>
<p>Otra copada:</p>
<pre class="r"><code>rammbot(seed = 3123)</code></pre>
<blockquote>
<p>Und keiner der sonne.<br />
Oh weh, mutter.<br />
Wie ein spiel begann zu gehen.<br />
Eifersucht.</p>
</blockquote>
<blockquote>
<p>Y nadie del Sol.<br />
Oh dolor, madre.<br />
Como un juego, empez√≥ a irse.<br />
Celos.</p>
</blockquote>
<p>¬øY qu√© dice Lacribot?</p>
<pre class="r"><code>lacribot(seed = 47665, n = 5)</code></pre>
<blockquote>
<p>Dir.<br />
Millionen uns beide augen brennen eine kluft mit schweren licht, ich rei√üe a dream has.<br />
Niemand erlebt mensch zu ihr- nichts.<br />
Ich sie nie sah die dich.<br />
Und im wind ich dich.</p>
</blockquote>
<p>Ups, se me infiltr√≥ un poco de ingl√©s.</p>
<blockquote>
<p>A t√≠.<br />
Millones de nosotros, ambos ojos queman una brecha con luz pesada, yo rompo un sue√±o.<br />
Nadie experimenta humanamente a ella- nada.<br />
Yo, ella, nunca te vi.<br />
Y en el viento yo a t√≠.</p>
</blockquote>
<pre class="r"><code>lacribot(seed = 6)</code></pre>
<blockquote>
<p>Keine stillen.<br />
Nur diesen schmerz zerquetschte lebens.<br />
Und vielleicht nicht mehr.<br />
Ihn.</p>
</blockquote>
<blockquote>
<p>No amamantar.<br />
S√≥lo esta vida aplastada por el dolor.<br />
Y quiz√°s no m√°s.<br />
A √©l.</p>
</blockquote>
<p>No s√© si estas funciones podr√°n ganar un premio, pero probablemente escriban mejor poes√≠a que yo.</p>
<p>Para cerrar, vamos a armar una canci√≥n de Rammstein.</p>
<pre class="r"><code>set.seed(23543)
intro &lt;- rammbot(n = 3)
pre_estribillo &lt;- rammbot(n = 1)
estribillo &lt;- rammbot()
estrofa1 &lt;- rammbot()
estrofa2 &lt;- rammbot()</code></pre>
<p>Y as√≠ de f√°cil, les presento el nuevo hit de Rammstein, que voy a titular ‚ÄúUnd Frei‚Äù.</p>
<blockquote>
<p>
</p>
<p>
Feuer liebt mich ganz auf die kreatur.<br />Tut es wird nass fallen.<br />Asche zu lebzeit in amerika).<br />
</p>
<p>
Schwuler.<br />Ich die musik.<br />Ohne dich).<br />Verhei√üung sag ihr bleibt nicht dass ich hab‚Äô das r√∂slein ihn lesen —Ç–∞–º –∏ —Ç—É—Ç.<br />
</p>
<p>
Laben brauch keine lust vom degen.<br />
</p>
<p>
Und frei!<br />Ich werde immer wenn ich nehme in schlechten i can, was nicht sein.<br />Recht wortlos auch den kleinen so kalt, du mir.<br />Asche.<br />
</p>
<p>
Die liebe ist f√ºr ein.<br />Du hast, benzin.<br />Zwei, du sehen?<br />Verlogen euch scheidet von der tiefe brunnen mehr ach scheine.<br />
</p>
<p>
Und frei!<br />Ich werde immer wenn ich nehme in schlechten i can, was nicht sein.<br />Recht wortlos auch den kleinen so kalt, du mir.<br />Asche.<br />
</p>
</blockquote>
<p>¬øAlguien quiere musicalizarlo?</p>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">ETIQUETADO EN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="../../../tags/data.table/">data.table</a>

  <a class="tag tag--primary tag--small" href="../../../tags/texto/">texto</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../2021/03/star-trek-rakings/" data-tooltip="Analizando ratings de Star Trek en IMDB">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">SIGUIENTE</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../2019/11/rammstein-vs-lacrimosa/" data-tooltip="Rammstein vs. Lacrimosa">
              
                  <span class="hide-xs hide-sm text-small icon-mr">ANTERIOR</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/2019/12/rammbot-un-bot-que-crea-canciones-de-rammstein/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/2019/12/rammbot-un-bot-que-crea-canciones-de-rammstein/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=/2019/12/rammbot-un-bot-que-crea-canciones-de-rammstein/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2021 Elio Campitelli. Todos los derechos reservados
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="2">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../2021/03/star-trek-rakings/" data-tooltip="Analizando ratings de Star Trek en IMDB">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">SIGUIENTE</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../2019/11/rammstein-vs-lacrimosa/" data-tooltip="Rammstein vs. Lacrimosa">
              
                  <span class="hide-xs hide-sm text-small icon-mr">ANTERIOR</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/2019/12/rammbot-un-bot-que-crea-canciones-de-rammstein/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/2019/12/rammbot-un-bot-que-crea-canciones-de-rammstein/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=/2019/12/rammbot-un-bot-que-crea-canciones-de-rammstein/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="2">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=%2F2019%2F12%2Frammbot-un-bot-que-crea-canciones-de-rammstein%2F">
          <i class="fa fa-facebook-official"></i><span>Compartir en Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=%2F2019%2F12%2Frammbot-un-bot-que-crea-canciones-de-rammstein%2F">
          <i class="fa fa-twitter"></i><span>Compartir en Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=%2F2019%2F12%2Frammbot-un-bot-que-crea-canciones-de-rammstein%2F">
          <i class="fa fa-google-plus"></i><span>Compartir en Google&#43;</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="//www.gravatar.com/avatar/2376976935665241d1fd5a1fb8124a81?s=110" alt="Foto de autor" />
    
    <h4 id="about-card-name">Elio Campitelli</h4>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Atmospheric sciences graduate researcher at CONICET
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Argentina
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="Buscar" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center">no se encontraron art√≠culos</div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../2021/07/wrapper-stop/">
                <h3 class="media-heading">C√≥mo maniuplar mensajes de error</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2021
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">La funci√≥n stop() permite terminar la ejecuci√≥n de una funci√≥n si hay alg√∫n problema mortal.
Por ejemplo, imaginemos este c√≥digo que calcula la raziz cuadrada de un n√∫mero pero s√≥lo si el n√∫mero de entrada es positivo.
raiz_real &lt;- function(x) { if (x &lt; 0) { stop(&quot;&#39;x&#39; no puede ser negativo.&quot;) } sqrt(x) } raiz_real(2) ## [1] 1.414214 raiz_real(-2) ## Error in raiz_real(-2): &#39;x&#39; no puede ser negativo. Si x es negativo, la funci√≥n tira un error.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../2021/05/r-pipa-nativa/">
                <h3 class="media-heading">La nueva pipa</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2021
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Este post quiz√°s llega un poco tarde pero hace poco sali√≥ la versi√≥n 4.1.0 de R. Y si la versi√≥n 4.0.0 hizo noticia con el revolucionario cambio de stringAsFactors = FALSE, la gran novedad de esta siguiente versi√≥n es la implementaci√≥n de una ‚Äúpipa‚Äù nativa.
La nueva pipa La ‚Äúpipa‚Äù (traducci√≥n no muy buena de ‚Äúpipe‚Äù en ingl√©s) es una de las principales distinciones del c√≥digo que usa tidyverse / dplyr.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../2021/03/star-trek-rakings/">
                <h3 class="media-heading">Analizando ratings de Star Trek en IMDB</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Mar 3, 2021
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Con mi novia estamos viendo Star Trek: The Next Generation. La primera temporada es bastante mala, pero luego remonta. Me dio curiosidad si los ratings mostraban eso. Entonces empec√© a bajar los ratings de cada cap√≠tulo en IMDB. En el medio, me encontr√© que IMDB provee ratings promedio por demograf√≠a, as√≠ que decid√≠ tambi√©n bajar eso.
Y ya que estamos, baj√© tambi√©n los ratings de las otras series de Star Trek.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../2019/12/rammbot-un-bot-que-crea-canciones-de-rammstein/">
                <h3 class="media-heading">Obligu√© a un bot a escuchar m√°s de 1000 horas de Rammstein y le ped√≠ que escribiera una canci√≥n propia.</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Dec 12, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Cuando le cont√© a una amiga que hab√≠a analizado las letras de Rammstein y Lacrimosa, me tir√≥ la idea de usar un modelo para crear letras de las bandas. Me pareci√≥ una idea divertida, as√≠ que ac√° tienen el futuro de la m√∫sica:
library(data.table) library(magrittr) Igual que hice antes, bajo las letras de losdiscos de estudio de cada artista. Guardo las cosas en un archivo para no tener que bajar los datos cada vez que corro esto.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../2019/11/rammstein-vs-lacrimosa/">
                <h3 class="media-heading">Rammstein vs. Lacrimosa</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Hace un tiempo una conocida twite√≥ que hab√≠a tenido que comprarse un libro entero para aprender los g√©neros gramaticales del alem√°n. Entre las repuestas, hab√≠a una persona que contaba que de adolescente crey√≥ (err√≥neamente) que podr√≠a aprender alem√°n s√≥lo escuchando Rammstein. Habeindo estudiado unos drei Jahre de alem√°n al mismo tiempo que escuchaba Rammstein y otras bandas en alem√°n, las letras de Rammstein siempre me parecieron extremadamente simples.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../2019/10/lo-que-aprend%C3%AD-en-latinr-2019/">
                <h3 class="media-heading">Lo que aprend√≠ en LatinR 2019</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Hace unas semanas volv√≠ de Santiago de Chile luego de ir a Latinr 2019. Igual que el a√±o pasado, fue una experiencia divertida. Estas son algunas de las cosas que me llamaron la atenci√≥n.
Workshops A la ma√±ana del primer d√≠a asist√≠ al workshop de Mine √áetinkaya-Rundel sobre ense√±anza de R. Ejemplific√≥ algunos principios b√°sicos a la hora de dise√±ar clases. La idea de ‚Äúdejales comer el pastel primero‚Äù creo que es la principal ense√±anza.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../2019/04/ecmwfr-calentamiento-global/">
                <h3 class="media-heading">Midiendo el calentamiento global con ecmwfr</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Para mi investigaci√≥n necesitaba bajar datos meteorol√≥gicos grillados del ERA-Interim, que es una base de datos generada por el ECMWF. Bajar los datos en su sitio web es muy inc√≥mido y requiere muchos clicks. Por suerte, me encontr√© con el paquete ecmwfr con el que pude bajar los datos directamente desde R y muy f√°cilmente. Una de las cosas geniales del c√≥digo abierto, es que los usuarios pueden ser colaboradores, as√≠ que suger√≠ algunas cosas y aport√© un poco de c√≥digo.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../2019/01/metamerismo-estad%C3%ADstico/">
                <h3 class="media-heading">Metamerismo estad√≠stico</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jan 1, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">El paquete <a href="https://github.com/eliocamp/metamer">metamer</a> implementa en R el algoritmo descripto por Matejka y Fitzmaurice (2017) para generar sets de datos distintos entre s√≠ pero con estad√≠sticos id√©nticos. Adem√°s, propongo el nombre &ldquo;met√°meros&rdquo; para estos grupos de datos en analog√≠a con el concepto proveniente de colorimetr√≠a.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../2018/10/leyendo-informacion-incucai/">
                <h3 class="media-heading">Leyendo informaci√≥n del INCUCAI</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">El otro d√≠a el diario Clar√≠n sac√≥ una nota afirmando que el pasado agosto se hab√≠a dado el r√©cord hist√≥rico de transplantes de √≥rganos y se lo adjudicaba a la &ldquo;Ley Justina&rdquo;, que establece que todos somos donantes presuntos a menos que se declare lo contrario en vida. Dado que esta ley se aprob√≥ hace poco m√°s de un mes y todav√≠a no est√° reglamentada, es poco probable que este r√©cord se deba al cambio legal.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../2018/09/multiple-color-and-fill-scales-with-ggplot2/">
                <h3 class="media-heading">Multiple color (and fill) scales with ggplot2</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">(Versi√≥n en espa√±ol)
tl;dr: The functionality shown in this post is now on the ggnewscale package! üì¶. You can find the original code in this gist.
A somewhat common annoyance for some ggplot2 users is the lack of support for multiple colour and fill scales. Perusing StackOverflow you can find many questions relating to this issue:

Unfortunately, this deluge of questions is met with a shortage of conclusive answers, most of them being some variation of &ldquo;you can&rsquo;t, but here&rsquo;s how to hack it or visualise the data differently&rdquo;.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero="no se encontraron art√≠culos"
         data-message-one="1 art√≠culo encontrado"
         data-message-other="{n} art√≠culos encontrados">
         21 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('/images/cover2.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js" integrity="sha256-XrZQp+ZMfovqr6Hb2M6okHvSEYaB/+Xbx7toWmOOZUM=" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-light.min.css" integrity="sha256-KacbO6Nou2geGJEUzQeKzKEdp/DENVGJKAd2v37moh0=" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="../../../js/script-qi9wbxp2ya2j6p7wx1i6tgavftewndznf4v0hy2gvivk1rxgc3lm7njqb6bz.min.js"></script>



<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
      <script>
        var disqus_config = function () {
          this.page.url = '\/2019\/12\/rammbot-un-bot-que-crea-canciones-de-rammstein\/';
          
            this.page.identifier = '\/2019\/12\/rammbot-un-bot-que-crea-canciones-de-rammstein\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'codigo-r';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  



    
  </body>
</html>

