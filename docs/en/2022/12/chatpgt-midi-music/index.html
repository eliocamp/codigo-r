

  
    
  


  




  


  

<!DOCTYPE html>
<html lang="es-es">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.56.3 with theme Tranquilpeak 0.4.3-BETA">
    <title>MIDI madness with ChatGPT: the AI-powered tunes that will make you laugh, cry, and dance</title>
    <meta name="author" content="Elio Campitelli">
    <meta name="keywords" content="music, art, GPT, chatGPT, R">

    <link rel="icon" href="../../../../favicon.png">
    

    
    <meta name="description" content="ChatGPT seems to be taking the world by storm. This is version of the GPT3 language model which is somehow optimised for chat dominates my Mastodon feed and inspired countless articles and discussion. 1
A decent chunk of the discourse has been about how the outputs of the models sound very plausible and even authoritative but lack any connection with reality because the model is train to mimic language, not to give truth.">
    <meta property="og:description" content="ChatGPT seems to be taking the world by storm. This is version of the GPT3 language model which is somehow optimised for chat dominates my Mastodon feed and inspired countless articles and discussion. 1
A decent chunk of the discourse has been about how the outputs of the models sound very plausible and even authoritative but lack any connection with reality because the model is train to mimic language, not to give truth.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="MIDI madness with ChatGPT: the AI-powered tunes that will make you laugh, cry, and dance">
    <meta property="og:url" content="/codigo-r/en/2022/12/chatpgt-midi-music/">
    <meta property="og:site_name" content="Code R">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Code R">
    <meta name="twitter:description" content="ChatGPT seems to be taking the world by storm. This is version of the GPT3 language model which is somehow optimised for chat dominates my Mastodon feed and inspired countless articles and discussion. 1
A decent chunk of the discourse has been about how the outputs of the models sound very plausible and even authoritative but lack any connection with reality because the model is train to mimic language, not to give truth.">
    
      <meta name="twitter:creator" content="@d_olivaw">
    
    

    
    

    
      <meta property="og:image" content="//www.gravatar.com/avatar/2376976935665241d1fd5a1fb8124a81?s=640">
    

    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="../../../../css/style-jsjn0006wyhpyzivf6yceb31gvpjatbcs3qzjvlumobfnugccvobqwxnnaj8.min.css" />
    
    
      
        <link rel="stylesheet"  href="../../../../css/custom.css">
      
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="2">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="../../../../en">Code R</a>
  </div>
  
    
      <a class="header-right-picture "
         href="../../../../#about">
    
    
    
      
        <img class="header-picture" src="//www.gravatar.com/avatar/2376976935665241d1fd5a1fb8124a81?s=90" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="2">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="../../../../#about">
          <img class="sidebar-profile-picture" src="//www.gravatar.com/avatar/2376976935665241d1fd5a1fb8124a81?s=110" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Elio Campitelli</h4>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../../en">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../../en/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../../en/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../../en/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/eliocamp">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.r-bloggers.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">R-Bloggers</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://twitter.com/d_olivaw">
    
      <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="../../../../en/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="2"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      MIDI madness with ChatGPT: the AI-powered tunes that will make you laugh, cry, and dance
    </h1>
  
  


  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2022-12-11T00:00:00Z">
        
  
  
  
  
    December 11, 2022
  

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="../../../../en/categories/gpt">GPT</a>
    
  

  </div>

</div>



<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    });
    </script>
    <script type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              


<p><a href="chat.openai.com/">ChatGPT</a> seems to be taking the world by storm.
This is version of the GPT3 language model which is somehow optimised for chat dominates my Mastodon feed and inspired countless articles and discussion. <a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<p>A decent chunk of the discourse has been about how the outputs of the models sound very plausible and even authoritative but lack any connection with reality because the model is train to mimic language, not to give truth.
Another chunk of the discourse is dominated by funny responses and creations.
Things like poems, stories, limericks.</p>
<p>This convinced me that that we should treat GPT like we treat image generation models: tools to create art, which is, in principle, unconcerned with truth.
I’ve been playing with Stable Diffusion (you can check <a href="https://eliocamp.github.io/art/">my gallery</a> so I was interested to know if I could use GPT to create other things beside text.</p>
<p>Sure, GPT’s will only respond with text, but since anything can be potentially encoded in (enough) text, it could potentially create anything.</p>
<div id="gpt-cant-create-images" class="section level2">
<h2>GPT can’t create images</h2>
<p>My first thought was to try to create images using <a href="https://en.wikipedia.org/wiki/Base64">Base64 encoding</a>.
Since images can be base64 encoded, then I could potentially ask GPT something like “Give me the base64 representation of a house at the foot of a mountain”.</p>
<p>First I checked if GPT could understand base64 encoding at all.
It turns out, <a href="https://mastodon.social/@eliocamp/109475795739588085">it can</a>!
However, in my tests it seems that GPT’s ability to decode from and encode to base64 was limited to short sentences and didn’t extend to images.</p>
<p>I gave it the base64 representation of a 50px by 50px image of a black square and asked it to describe the image.
Even though GPT recognised the encoded image as a PNG file, it didn’t describe it properly, it just gave bullshit answers.
Furthermore, when asked to generate a base64-encoded image the resulting text wasn’t even valid and I think it was larger that the limit of tokens for each response.</p>
<p>So images are a bust.</p>
</div>
<div id="gpt-can-create-music" class="section level2">
<h2>GPT can create music</h2>
<p>Having failed with images, I turned my attention to music.
There are several ways to represent music with text.
At first I tried with <a href="https://en.wikipedia.org/wiki/ABC_notation">ABC Notation</a>, but asking it to create the ABC notation of the Happy Birthday tune resulted in invalid notation and I wasn’t able to nudge it to correct it.
I don’t know enough of ABC notation, though, so that could be also my fault.</p>
<p>Then, I remembered that MIDI files can be encoded as text, so I asked it to create a MIDI text for the tune.
Unfortunately it didn’t work very well.
I could get valid MIDI notation, but it was just gibberish.</p>
<p>But then I remembered a trick I’d seen posted on twitter: GPT can be bad at giving answers, but it can be good at creating code that returns the answer.
So I tried combinations of “Write a program in R/python/bash that crates a simple tune.”
(I couldn’t get it to play Happy Birthday.)
Eventually I settled for python and got my first song!</p>
<p>Below is the full annotated conversation. Note that at some points I had to edit previous sections of the conversation, so what you’re seeing is just the end result.</p>
<div id="making-gpt-sing" class="section level3">
<h3>Making GPT sing</h3>
<div id="creating-a-python-program-to-write-midi-files" class="section level4">
<h4>Creating a python program to write midi files</h4>
<p>After a few tries I decided to use python.
In some examples, GPT wrote code that added each note manually, so I had to ask it explicitly to use a for loop.</p>
<div class="conversation">
<div class="question">
<p>I want to write a midi file.
Can you provide python3 code that writes a simple tune using a for loop to add each note?</p>
</div>
<div class="answer">
<p>Here is a simple example using the python-midi library:</p>
<pre class="python"><code>from midiutil.MidiFile import MIDIFile

# create the MIDIFile object with 1 track
midi = MIDIFile(1)

# add the track name and tempo
midi.addTrackName(0, 0, &quot;My Simple Tune&quot;)
midi.addTempo(0, 0, 120)

# create a list of notes to add to the track
notes = [60, 62, 64, 65, 67, 69, 71]

# use a for loop to add each note to the track
for i, note in enumerate(notes):
   # add the note on event
   midi.addNote(0, 0, note, i, 1, 100)
   # add the note off event
   midi.addNote(0, 0, note, i+1, 1, 0)

# write the MIDIFile to a file
with open(&quot;simple_tune.mid&quot;, &quot;wb&quot;) as output_file:
   midi.writeFile(output_file)</code></pre>
<p>This code will create a simple tune with a single track and 7 notes, with each note lasting for 1 beat at 120 beats per minute.
The resulting MIDI file can be played back using a MIDI player or imported into a DAW for further editing.</p>
</div>
</div>
<p>Here’s out first tune!</p>
<div class='audio-container'>

<audio controls>
<source src="../../../../post/gptsong/tune1.mp3" type="audio/mpeg">
<p>Your browser does not support the audio element.</p>
</audio>
</div>
<p>Now let’s start improving to the script by adding more options.</p>
<div class="conversation">
<div class="question">
<p>Great! Can you modify the program so each note has a potentially different length?</p>
</div>
<div class="answer">
<p>Sure, we can use the <code>duration</code> parameter in the <code>addNote</code> method to specify the length of each note. Here is an updated version of the code that allows for different note lengths:</p>
<pre class="python"><code>from midiutil.MidiFile import MIDIFile

# create the MIDIFile object with 1 track
midi = MIDIFile(1)

# add the track name and tempo
midi.addTrackName(0, 0, &quot;My Simple Tune&quot;)
midi.addTempo(0, 0, 120)

# create a list of notes and durations to add to the track
notes = [60, 62, 64, 65, 67, 69, 71]
durations = [1, 0.5, 0.25, 1, 0.75, 0.5, 2]

# use a for loop to add each note to the track
for i, (note, duration) in enumerate(zip(notes, durations)):
   # add the note on event
   midi.addNote(0, 0, note, i, duration, 100)
   # add the note off event
   midi.addNote(0, 0, note, i+duration, duration, 0)

# write the MIDIFile to a file
with open(&quot;simple_tune.mid&quot;, &quot;wb&quot;) as output_file:
   midi.writeFile(output_file)</code></pre>
<p>In this code, we have added a <code>durations</code> list which specifies the length of each note in beats. We then use this list in the for loop to set the duration of each note. Note that we also need to update the time of the note off event to account for the different note lengths.</p>
</div>
<div class="question">
<p>Fantastic. One thing, though is that I don’t think the program needs note on and note off events, because the addNote method already defines the duration of each note, let’s remove that and only have one addNote in the for loop.</p>
</div>
<div class="answer">
<p>You are correct - the <code>addNote</code> method already includes the duration of each note, so we don’t need to add separate note on and note off events. Here is an updated version of the code that only uses the <code>addNote</code> method once per note:</p>
<pre class="python"><code>from midiutil.MidiFile import MIDIFile

# create the MIDIFile object with 1 track
midi = MIDIFile(1)

# add the track name and tempo
midi.addTrackName(0, 0, &quot;My Simple Tune&quot;)
midi.addTempo(0, 0, 120)

# create a list of notes and durations to add to the track
notes = [60, 62, 64, 65, 67, 69, 71]
durations = [1, 0.5, 0.25, 1, 0.75, 0.5, 2]

# use a for loop to add each note to the track
for i, (note, duration) in enumerate(zip(notes, durations)):
   # add the note with the specified duration
   midi.addNote(0, 0, note, i, duration, 100)

# write the MIDIFile to a file
with open(&quot;simple_tune.mid&quot;, &quot;wb&quot;) as output_file:
   midi.writeFile(output_file)</code></pre>
<p>In this code, we only use the <code>addNote</code> method once per note, and the duration of each note is specified in the <code>duration</code> parameter. This allows us to create a simple tune with varying note lengths.</p>
</div>
</div>
<p>Note that I had to do a little thinking about the script and also looking at <a href="https://midiutil.readthedocs.io/en/1.2.1/common.html#adding-notes">midiutil’s documentation</a> to find that subtle issue with the program.</p>
<p>The next bit fixes an issue that I only noticed after trying to create some more stuff with the script.</p>
<div class="conversation">
<div class="question">
<p>Great. However, now that notes can have different duration, the timing of each note is not constant. Let’s compute the timing based on the duration of each note.</p>
</div>
<div class="answer">
<p>To compute the timing of each note based on its duration, we can keep track of the total time elapsed and use that as the starting time of each note. Here is an updated version of the code that does this:</p>
<pre class="python"><code>from midiutil.MidiFile import MIDIFile

# create the MIDIFile object with 1 track
midi = MIDIFile(1)

# add the track name and tempo
midi.addTrackName(0, 0, &quot;My Simple Tune&quot;)
midi.addTempo(0, 0, 120)

# create a list of notes and durations to add to the track
notes = [60, 62, 64, 65, 67, 69, 71]
durations = [1, 0.5, 0.25, 1, 0.75, 0.5, 2]

# initialize a variable to keep track of the total time elapsed
total_time = 0

# use a for loop to add each note to the track
for i, (note, duration) in enumerate(zip(notes, durations)):
   # add the note with the specified duration starting at the current total time
   midi.addNote(0, 0, note, total_time, duration, 100)
   # increment the total time by the duration of the current note
   total_time += duration

# write the MIDIFile to a file
with open(&quot;simple_tune.mid&quot;, &quot;wb&quot;) as output_file:
   midi.writeFile(output_file)</code></pre>
<p>In this code, we initialize a <code>total_time</code> variable to keep track of the time elapsed so far. Then, in the for loop, we use the <code>total_time</code> variable as the starting time of each note, and increment it by the duration of the current note. This ensures that each note is spaced out according to its duration.</p>
</div>
<div class="question">
<p>Fantastic. Let’s now add the option of having a different volume for each note.</p>
</div>
<div class="answer">
<p>To add the option of having a different volume for each note, we can add a <code>volumes</code> list that specifies the volume of each note, and use that in the <code>addNote</code> method. Here is an updated version of the code that does this:</p>
<pre class="python"><code>from midiutil.MidiFile import MIDIFile

# create the MIDIFile object with 1 track
midi = MIDIFile(1)

# add the track name and tempo
midi.addTrackName(0, 0, &quot;My Simple Tune&quot;)
midi.addTempo(0, 0, 120)

# create a list of notes, durations, and volumes to add to the track
notes = [60, 62, 64, 65, 67, 69, 71]
durations = [1, 0.5, 0.25, 1, 0.75, 0.5, 2]
volumes = [100, 80, 60, 50, 40, 30, 20]

# initialize a variable to keep track of the total time elapsed
total_time = 0

# use a for loop to add each note to the track
for i, (note, duration, volume) in enumerate(zip(notes, durations, volumes)):
   # add the note with the specified duration and volume starting at the current total time
   midi.addNote(0, 0, note, total_time, duration, volume)
   # increment the total time by the duration of the current note
   total_time += duration

# write the MIDIFile to a file
with open(&quot;simple_tune.mid&quot;, &quot;wb&quot;) as output_file:
   midi.writeFile(output_file)</code></pre>
<p>In this code, we have added a <code>volumes</code> list that specifies the volume of each note, and we use this in the <code>addNote</code> method as the <code>volume</code> parameter. This allows us to have different volumes for each note in the tune.</p>
</div>
<div class="question">
<p>Great. Now, what’s the maximum volume?</p>
</div>
<div class="answer">
<p>In MIDI files, the maximum volume is represented by the value 127. This is the maximum value that can be used in the <code>volume</code> parameter of the <code>addNote</code> method. In the code above, we have used the values 100, 80, 60, 50, 40, 30, and 20 for the volumes of each note, which are all less than the maximum value of 127. If you want to use the maximum volume for any of the notes, you can simply use the value 127 in the <code>volumes</code> list. For example:</p>
<pre class="css"><code>volumes = [100, 80, 60, 127, 40, 30, 20]</code></pre>
<p>This would set the volume of the 4th note to the maximum value of 127.</p>
</div>
</div>
<p>So now I had a script that could create a tune with many interesting note variations.
Here’s the tune so far:</p>
<div class='audio-container'>

<audio controls>
<source src="../../../../post/gptsong/tune2.mp3" type="audio/mpeg">
<p>Your browser does not support the audio element.</p>
</audio>
</div>
<p>So now I wanted to go a bit further.</p>
<div class="conversation">
<div class="question">
<p>Perfect. Now, I will be using the program to create midi files of piano songs, which have a right hand part playing the melody and a left hand part that plays the base. Let’s modify the program to play each hand in it’s own track.</p>
</div>
<div class="answer">
<p>To create a MIDI file with multiple tracks, we can simply create a <code>MIDIFile</code> object with multiple tracks and use the <code>addNote</code> method for each track. Here is an updated version of the code that creates a MIDI file with two tracks for a piano song:</p>
<pre class="python"><code>from midiutil.MidiFile import MIDIFile

# create the MIDIFile object with 2 tracks
midi = MIDIFile(2)

# add the track names and tempo
midi.addTrackName(0, 0, &quot;Right Hand&quot;)
midi.addTrackName(1, 0, &quot;Left Hand&quot;)
midi.addTempo(0, 0, 120)

# create a list of notes, durations, and volumes for the right hand part
right_notes = [60, 62, 64, 65, 67, 69, 71]
right_durations = [1, 0.5, 0.25, 1, 0.75, 0.5, 2]
right_volumes = [100, 80, 60, 50, 40, 30, 20]

# create a list of notes, durations, and volumes for the left hand part
left_notes = [48, 50, 52, 53, 55, 57, 59]
left_durations = [1, 0.5, 0.25, 1, 0.75, 0.5, 2]
left_volumes = [100, 80, 60, 50, 40, 30, 20]

# initialize a variable to keep track of the total time elapsed
total_time = 0

# use a for loop to add each note to the right hand track
for i, (note, duration, volume) in enumerate(zip(right_notes, right_durations, right_volumes)):
   # add the note with the specified duration and volume starting at the current total time
   midi.addNote(0, 0, note, total_time, duration, volume)
   # increment the total time by the duration of the current note
   total_time += duration

# reset the total time to 0 for the left hand track
total_time = 0

# use a for loop to add each note to the left hand track
for i, (note, duration, volume) in enumerate(zip(left_notes, left_durations, left_volumes)):
   # add the note with the specified duration and volume starting at the current total time
   midi.addNote(1, 0, note, total_time, duration, volume)
   # increment the total time by the duration of the current note
   total_time += duration

# write the MIDIFile to a file
with open(&quot;piano_song.mid&quot;, &quot;wb&quot;) as output_file:
   midi.writeFile(output_file)</code></pre>
<p>In this code, we create a <code>MIDIFile</code> object with 2 tracks and add track names for each track. We then create separate lists of notes, durations, and volumes for each track, and use a for loop to add each note to the appropriate track. This allows us to create a MIDI file with multiple tracks for a piano song with a right hand and left hand part.</p>
</div>
</div>
<p>Not the most elegant script ever crated, but it works!
I was quite surprised by the fact that GPT actually used notes with lower pitch for the left hand part!
Also notice that the name of the output file is now “piano_song.mid”.</p>
<p>This was going so well that I decided to try go further.</p>
<div class="conversation">
<div class="question">
<p>Great. Now, can you add an option to change the instrument. Let’s test it with a flute.</p>
</div>
<div class="answer">
<p>To change the instrument of a track in a MIDI file, we can use the <code>addProgramChange</code> method to specify the instrument for each track. Here is an updated version of the code that adds this option:</p>
<pre class="python"><code>from midiutil.MidiFile import MIDIFile

# create the MIDIFile object with 2 tracks
midi = MIDIFile(2)

# add the track names and tempo
midi.addTrackName(0, 0, &quot;Right Hand&quot;)
midi.addTrackName(1, 0, &quot;Left Hand&quot;)
midi.addTempo(0, 0, 120)

# set the instrument for each track
midi.addProgramChange(0, 0, 0, 74)  # flute for right hand track
midi.addProgramChange(1, 0, 0, 74)  # flute for left hand track

# create a list of notes, durations, and volumes for the right hand part
right_notes = [60, 62, 64, 65, 67, 69, 71]
right_durations = [1, 0.5, 0.25, 1, 0.75, 0.5, 2]
right_volumes = [100, 80, 60, 50, 40, 30, 20]

# create a list of notes, durations, and volumes for the left hand part
left_notes = [48, 50, 52, 53, 55, 57, 59]
left_durations = [1, 0.5, 0.25, 1, 0.75, 0.5, 2]
left_volumes = [100, 80, 60, 50, 40, 30, 20]

# initialize a variable to keep track of the total time elapsed
total_time = 0

# use a for loop to add each note to the right hand track
for i, (note, duration, volume) in enumerate(zip(right_notes, right_durations, right_volumes)):
   # add the note with the specified duration and volume starting at the current total time
   midi.addNote(0, 0, note, total_time, duration, volume)
   # increment the total time by the duration of the current note
   total_time += duration

# reset the total time to 0 for the left hand track
total_time = 0

# use a for loop to add each note to the left hand track
for i, (note, duration, volume) in enumerate(zip(left_notes, left_durations, left_volumes)):
   # add the note with the specified duration and volume starting at the current total time
   midi.addNote(1, 0, note, total_time, duration, volume)
   # increment the total time by the duration of the current note
   total_time += duration

# write the MIDIFile to a file
with open(&quot;piano_song.mid&quot;, &quot;wb&quot;) as output_file:
   midi.writeFile(output_file)</code></pre>
<p>In this code, we have added two <code>addProgramChange</code> calls to set the instrument for each track. We have used the value 74 for the instrument, which corresponds to the flute. You can use a different instrument by specifying a different value in the <code>addProgramChange</code> method. A list of available instruments and their corresponding values can be found here: <a href="https://www.midi.org/specifications/item/gm-level">https://www.midi.org/specifications/item/gm-level</a></p>
</div>
</div>
<p>That was incredible!
GPT actually correctly decoded the number corresponding to the Flute.
The link it gave wasn’t very helpful, so had to google the list of midi instruments.</p>
<p>Now I wanted my program to decode that list so I could just use the name of the instrument instead of the number.
My idea was to have a csv with the data and load it in python.
As you will see, GPT had other idea.</p>
<div class="conversation">
<div class="question">
<p>Great. Can you give me a csv string with columns “instrument” and “value” with the name and value of instruments 0 to 23? The names of the instruments should be quoted.</p>
</div>
<div class="answer">
<p>Sure, here is a CSV string with the names and values of instruments 0 to 23:</p>
<pre class="csv"><code>&quot;instrument&quot;,&quot;value&quot;
&quot;Acoustic Grand Piano&quot;,&quot;0&quot;
&quot;Bright Acoustic Piano&quot;,&quot;1&quot;
&quot;Electric Grand Piano&quot;,&quot;2&quot;
&quot;Honky-tonk Piano&quot;,&quot;3&quot;
&quot;Electric Piano 1&quot;,&quot;4&quot;
&quot;Electric Piano 2&quot;,&quot;5&quot;
&quot;Harpsichord&quot;,&quot;6&quot;
&quot;Clavi&quot;,&quot;7&quot;
&quot;Celesta&quot;,&quot;8&quot;
&quot;Glockenspiel&quot;,&quot;9&quot;
&quot;Music Box&quot;,&quot;10&quot;
&quot;Vibraphone&quot;,&quot;11&quot;
&quot;Marimba&quot;,&quot;12&quot;
&quot;Xylophone&quot;,&quot;13&quot;
&quot;Tubular Bells&quot;,&quot;14&quot;
&quot;Dulcimer&quot;,&quot;15&quot;
&quot;Drawbar Organ&quot;,&quot;16&quot;
&quot;Percussive Organ&quot;,&quot;17&quot;
&quot;Rock Organ&quot;,&quot;18&quot;
&quot;Church Organ&quot;,&quot;19&quot;
&quot;Reed Organ&quot;,&quot;20&quot;
&quot;Accordion&quot;,&quot;21&quot;
&quot;Harmonica&quot;,&quot;22&quot;
&quot;Tango Accordion&quot;,&quot;23&quot;</code></pre>
<p>In this CSV string, the first column contains the name of the instrument, and the second column contains its corresponding value. You can use this string to create a lookup table for the available instruments and their values.</p>
</div>
<div class="question">
<p>Fantastic. I saved this information in a file called “instruments.csv”. Can you write a python function called decode_instrument that takes a string with the name of the instrument and returns its value?</p>
</div>
<div class="answer">
<p>Sure, here is a python function called <code>decode_instrument</code> that takes a string with the name of the instrument and returns its value:</p>
<pre class="python"><code>def decode_instrument(instrument_name):
    # create a dictionary mapping instrument names to their values
    instrument_values = {
        &quot;Acoustic Grand Piano&quot;: 0,
        &quot;Bright Acoustic Piano&quot;: 1,
        &quot;Electric Grand Piano&quot;: 2,
        &quot;Honky-tonk Piano&quot;: 3,
        &quot;Electric Piano 1&quot;: 4,
        &quot;Electric Piano 2&quot;: 5,
        &quot;Harpsichord&quot;: 6,
        &quot;Clavi&quot;: 7,
        &quot;Celesta&quot;: 8,
        &quot;Glockenspiel&quot;: 9,
        &quot;Music Box&quot;: 10,
        &quot;Vibraphone&quot;: 11,
        &quot;Marimba&quot;: 12,
        &quot;Xylophone&quot;: 13,
        &quot;Tubular Bells&quot;: 14,
        &quot;Dulcimer&quot;: 15,
        &quot;Drawbar Organ&quot;: 16,
        &quot;Percussive Organ&quot;: 17,
        &quot;Rock Organ&quot;: 18,
        &quot;Church Organ&quot;: 19,
        &quot;Reed Organ&quot;: 20,
        &quot;Accordion&quot;: 21,
        &quot;Harmonica&quot;: 22,
        &quot;Tango Accordion&quot;: 23
    }

    # return the value corresponding to the given instrument name
    return instrument_values[instrument_name]</code></pre>
<p>In this function, we have created a dictionary that maps instrument names to their values. We then use the given instrument name to look up the corresponding value in this dictionary and return it. You can use this function to quickly lookup the value of a given instrument name. For example, calling <code>decode_instrument("Acoustic Grand Piano")</code> would return the value 0, and calling <code>decode_instrument("Electric Piano 2")</code> would return the value 5.</p>
</div>
</div>
<p>Well, using code as data wasn’t what I was looking for, but I’ll take it.
Now I had to go back to the code and add this decoder.</p>
<div class="conversation">
<div class="question">
<p>Excellent. I saved this function into a file called decode_instrument.py. Can you now modify the program we were working on to import this function and use it to decode the instrument from a string?</p>
</div>
<div class="answer">
<p>Sure, here is an updated version of the code that imports the <code>decode_instrument</code> function and uses it to decode the instrument from a string:</p>
<pre class="python"><code>from midiutil.MidiFile import MIDIFile

# import the decode_instrument function
from decode_instrument import decode_instrument

# create the MIDIFile object with 2 tracks
midi = MIDIFile(2)

# add the track names and tempo
midi.addTrackName(0, 0, &quot;Right Hand&quot;)
midi.addTrackName(1, 0, &quot;Left Hand&quot;)
midi.addTempo(0, 0, 120)

# set the instrument for each track using the decode_instrument function
right_instrument = &quot;Electric Piano 1&quot;
left_instrument = &quot;Electric Piano 2&quot;
midi.addProgramChange(0, 0, 0, decode_instrument(right_instrument))
midi.addProgramChange(1, 0, 0, decode_instrument(left_instrument))

# create a list of notes, durations, and volumes for the right hand part
right_notes = [60, 62, 64, 65, 67, 69, 71]
right_durations = [1, 0.5, 0.25, 1, 0.75, 0.5, 2]
right_volumes = [100, 80, 60, 50, 40, 30, 20]

# create a list of notes, durations, and volumes for the left hand part
left_notes = [48, 50, 52, 53, 55, 57, 59]
left_durations = [1, 0.5, 0.25, 1, 0.75, 0.5, 2]
left_volumes = [100, 80, 60, 50, 40, 30, 20]

# initialize a variable to keep track of the total time elapsed
total_time</code></pre>
</div>
</div>
<p>Oops.
I got intro trouble.
I think that I was once again coming up to the limit of tokens GPT will respond with.
The script is now too long for it to fit into one response.
Fortunately, I could get the rest.</p>
<div class="conversation">
<div class="question">
<p>Oops, you didn’t finish the code there. That’s fine, can you write the code beginning from line 27?</p>
</div>
<div class="answer">
<p>Sure, here is the code starting from line 27:</p>
<pre class="python"><code># initialize a variable to keep track of the total time elapsed
total_time = 0

# use a for loop to add each note to the right hand track
for i, (note, duration, volume) in enumerate(zip(right_notes, right_durations, right_volumes)):
# add the note with the specified duration and volume starting at the current total time
midi.addNote(0, 0, note, total_time, duration, volume)
# increment the total time by the duration of the current note
total_time += duration

# reset the total time to 0 for the left hand track
total_time = 0

# use a for loop to add each note to the left hand track
for i, (note, duration, volume) in enumerate(zip(left_notes, left_durations, left_volumes)):
   # add the note with the specified duration and volume starting at the current total time
   midi.addNote(1, 0, note, total_time, duration, volume)
   # increment the total time by the duration of the current note
   total_time += duration

# write the MIDIFile to a file
with open(&quot;piano_song.mid&quot;, &quot;wb&quot;) as output_file:
   midi.writeFile(output_file)      </code></pre>
<p>In this code, we import the <code>decode_instrument</code> function and use it to decode the instrument from a string. We then use the <code>addProgramChange</code> method to set the instrument for each track using the decoded values. This allows us to specify the instrument for each track using its name</p>
</div>
</div>
<p>At this point I should’ve started to refactor the code to make it more concise and split things in different functions.
This would make each part fit into a single response and also better overall.
In the end I decided I was happy with the script as it was except for one detail.</p>
<div class="conversation">
<div class="question">
<p>Awesome. Now let’s assume that I have a file called song.py which has the notes, durations and volumes and instrument of each track. Modify the program to load the values from that file.</p>
</div>
<div class="answer">
<p>Sure, here is an updated version of the code that loads the values for the notes, durations, volumes, and instruments from a file called <code>song.py</code>:</p>
<pre class="python"><code>from midiutil.MidiFile import MIDIFile

# import the decode_instrument function
from decode_instrument import decode_instrument

# create the MIDIFile object with 2 tracks
midi = MIDIFile(2)

# add the track names and tempo
midi.addTrackName(0, 0, &quot;Right Hand&quot;)
midi.addTrackName(1, 0, &quot;Left Hand&quot;)
midi.addTempo(0, 0, 120)

# load the notes, durations, volumes, and instruments from the song.py file
from song import right_notes, right_durations, right_volumes, right_instrument
from song import left_notes, left_durations, left_volumes, left_instrument

# set the instrument for each track using the decode_instrument function
midi.addProgramChange(0, 0, 0, decode_instrument(right_instrument))
midi.addProgramChange(1, 0, 0, decode_instrument(left_instrument))

# initialize a variable to keep track of the total time elapsed
total_time = 0

# use a for loop to add each note to the right hand track
for i, (note, duration, volume) in enumerate(zip(right_notes, right_durations, right_volumes)):
   # add the note with the specified duration and volume starting at the current total time
   midi.addNote(0, 0, note, total_time,</code></pre>
</div>
<div class="question">
<p>Repeat the program starting from line 25.
[Again, hitting the limits]</p>
</div>
<div class="answer">
<p>Sure, here is the code starting from line 25:</p>
<pre class="python"><code># initialize a variable to keep track of the total time elapsed
total_time = 0

# use a for loop to add each note to the right hand track
for i, (note, duration, volume) in enumerate(zip(right_notes, right_durations, right_volumes)):
   # add the note with the specified duration and volume starting at the current total time
   midi.addNote(0, 0, note, total_time, duration, volume)
   # increment the total time by the duration of the current note
   total_time += duration

# reset the total time to 0 for the left hand track
total_time = 0

# use a for loop to add each note to the left hand track
for i, (note, duration, volume) in enumerate(zip(left_notes, left_durations, left_volumes)):
   # add the note with the specified duration and volume starting at the current total time
   midi.addNote(1, 0, note, total_time, duration, volume)
   # increment the total time by the duration of the current note
   total_time += duration

# write the MIDIFile to a file
with open(&quot;piano_song.mid&quot;, &quot;wb&quot;) as output_file:
   midi.writeFile(output_file)</code></pre>
<p>In this code, we load the values for the notes, durations, volumes, and instruments from the <code>song.py</code> file using the <code>from</code> keyword. We then use these values to set the instruments and add the notes to each track. This allows us to specify the notes, durations, volumes, and instruments for the song in a separate file, and use this code to generate the MIDI file.</p>
</div>
</div>
</div>
<div id="writing-a-song-with-gpt" class="section level4">
<h4>Writing a song with GPT</h4>
<p>At this point I was happy enough with the program and annoyed at hitting the limit that I decided to leave it as it was.
Now it was time to write some music.</p>
<p>The previous experience had convinced me that asking for a specific melody was a lost cause (there’s probably some prompt hack to do it, though) so I decided to go for a (mostly) original composition.</p>
<div class="conversation">
<div class="question">
<p>Excellent! Let’s write a song for this program.</p>
<p>First, the chord progression should be D major, A major, B minor, F# minor, G major, D major, G major, and A major. Can you create a left hand part that plays those notes with whole notes? Remember that each beat is 1 duration, so whole notes should be 4 durations.</p>
</div>
<div class="answer">
<p>Sure, here is a left hand part that plays the chord progression using whole notes (4 durations):</p>
<pre class="python"><code># create a list of notes, durations, and volumes for the left hand part
left_notes = [62, 57, 59, 54, 55, 62, 55, 57]
left_durations = [4, 4, 4, 4, 4, 4, 4, 4]
left_volumes = [100, 100, 100, 100, 100, 100, 100, 100]</code></pre>
<p>In this code, we have created a list of notes that correspond to the chord progression (D major, A major, B minor, F# minor, G major, D major, G major, and A major). We have also specified a duration of 4 for each note, which corresponds to a whole note. Finally, we have set the volume for each note to 100, which is the maximum value. You can use this code as the left hand part of the song.</p>
</div>
<div class="question">
<p>Good, but can you lower it an octave?</p>
</div>
<div class="answer">
<p>Sure, here is a left hand part that plays the chord progression using whole notes (4 durations) in a lower octave:</p>
<pre class="python"><code># create a list of notes, durations, and volumes for the left hand part
left_notes = [50, 45, 47, 42, 43, 50, 43, 45]
left_durations = [4, 4, 4, 4, 4, 4, 4, 4]
left_volumes = [100, 100, 100, 100, 100, 100, 100, 100]</code></pre>
<p>In this code, we have created a list of notes that correspond to the chord progression in a lower octave (D major, A major, B minor, F# minor, G major, D major, G major, and A major). We have also specified a duration of 4 for each note, which corresponds to a whole note. Finally, we have set the volume for each note to 100, which is the maximum value. You can use this code as the left hand part of the song, which will be played in a lower octave compared to the original version.</p>
</div>
</div>
<p>So far, this is our song.
The right hand part is the same random tune from before; pay attention to the left hand part.
Notice that it did a pretty good job translating my description into midi notes!
Pretty amazing.</p>
<div class='audio-container'>

<audio controls>
<source src="../../../../post/gptsong/song1.mp3" type="audio/mpeg">
<p>Your browser does not support the audio element.</p>
</audio>
</div>
<p>You might recognise this chord progression <a href="https://www.youtube.com/watch?v=uxC1fPE1QEE">from somewhere else</a>.</p>
<div class="conversation">
<div class="question">
<p>Perfect. Now lets move to the right hand part.
Each bar has 4 fourths. So in each bar let’s play an arpeggio of the corresponding triad plus the next octave. This is 4 fourths in each bar.</p>
</div>
<div class="answer">
<p>Sure, here is a right hand part that plays an arpeggio of the corresponding triad plus the next octave for each chord in the progression:</p>
<pre class="python"><code># create a list of notes, durations, and volumes for the right hand part
right_notes = [
62, 65, 69, 72,  # D major
57, 60, 64, 67,  # A major
59, 62, 66, 69,  # B minor
54, 57, 61, 64,  # F# minor
55, 58, 62, 65,  # G major
62, 65, 69, 72,  # D major
55, 58, 62, 65,  # G major
57, 60, 64, 67   # A major
]
right_durations = [1, 1, 1, 1] * 8  # each note is 1 beat
right_volumes = [100, 90, 80, 70] * 8  # each note has a different volume</code></pre>
<p>In this code, we have created a list of notes that correspond to the arpeggios of each chord in the progression. We have also specified a duration of 1 for each note, which corresponds to a beat. Finally, we have set the volume for each note to a different value, which allows each note to have a different volume. You can use this code as the right hand part of the song, which will play the arpeggios of each chord in the progression.</p>
</div>
</div>
<p>Now is when the cracks in my music theory formation were starting to show.
I bet that “main triad plus next octave” must have a name, but I don’t know it.
But in any case, GPT translated my ramblings into what I wanted.</p>
<div class='audio-container'>

<audio controls>
<source src="../../../../post/gptsong/song2.mp3" type="audio/mpeg">
<p>Your browser does not support the audio element.</p>
</audio>
</div>
<p>(I think there’s some dissonance somewhere; I could’ve looked closely at the notes to check it, but I decided that I wasn’t going to mess with GPT’s “vision”.)</p>
<p>So far I was using GPT to translate a fairly strict description of what I wanted into python code.
But now for the real challenge.</p>
<div class="conversation">
<div class="question">
<p>This sounds pretty good!
This is is good for a first verse. Describe a possible second verse that plays on this theme but adds some variation. Don’t show me the code, just describe it musically.</p>
</div>
<div class="answer">
<p>For the second verse, we can keep the same chord progression and left hand part, but add some variation to the right hand part. One possible variation is to play the arpeggio of each chord in the progression using sixteenth notes instead of fourths. This will make the right hand part sound more energetic and lively. We can also add some notes in between the arpeggios to fill out the harmony and create a more complex melody. For example, we can add some chromatic passing notes or add a note from the chord a beat before the arpeggio starts. This will create a more interesting and varied melody. Overall, the second verse will have the same overall structure and harmony as the first verse, but with some added variation and complexity in the right hand part.</p>
</div>
</div>
<p>Well, that was interesting, I guess.
Let’s see how it works…</p>
<div class="conversation">
<div class="question">
<p>Sounds good. Since the left hand part repeats I only need you to show me the code for the right hand part (both verses).</p>
</div>
<div class="answer">
<p>Sure, here is the code for the right hand part of both verses:</p>
<pre class="python"><code># create a list of notes, durations, and volumes for the right hand part (first verse)
right_notes_1 = [
62, 65, 69, 72,  # D major
57, 60, 64, 67,  # A major
59, 62, 66, 69,  # B minor
54, 57, 61, 64,  # F# minor
55, 58, 62, 65,  # G major
62, 65, 69, 72,  # D major
55, 58, 62, 65,  # G major
57, 60, 64, 67   # A major
]
right_durations_1 = [1, 1, 1, 1] * 8  # each note is 1 beat
right_volumes_1 = [100, 90, 80, 70] * 8  # each note has a different volume

# create a list of notes, durations, and volumes for the right hand part (second verse)
right_notes_2 = [
62, 63, 65, 66, 67, 69, 70, 72,  # D major
57, 58, 60, 61, 62, 64, 65, 67,  # A major
59, 60, 62, 63, 64, 66, 67, 69,  # B minor
54, 55, 57, 58, 59, 61, 62, 64,  # F# minor
55, 56, 58, 59, 60, 62, 63, 65,  # G major
62, 63, 65, 66, 67, 69, 70, 72,  # D major
55, 56, 58, 59, 60, 62, 63, 65,  # G major
57, 58, 60, 61, 62, 64, 65, 67   # A major
]
right_durations_2 = [0.25, 0.25, 0.25, 0.25] * 32  # each note is 1/4 beat
right_volumes_2 = [100, 90, 80, 70] * 32  # each note has a different volume</code></pre>
<p>In this code, we have created two lists of notes for the right hand part, one for each verse. The first verse uses the same arpeggio pattern as the original version, with a duration of 1 beat for each note. The second verse uses the same arpeggio pattern but with sixteenth notes, which have a duration of 1/4 beat. We have also specified different volumes for each note, which allows each note to have a different volume. You can use this code to generate the right hand part for both verses of the song.</p>
</div>
<div class="question">
<p>Ok, I have the right_notes_1 and right_notes_2. How do I combine them into one variable called right_notes?</p>
</div>
<div class="answer">
<p>To combine the <code>right_notes_1</code> and <code>right_notes_2</code> variables into one variable called <code>right_notes</code>, you can use the <code>+</code> operator to concatenate the two lists. Here is an example of how to do this:</p>
<pre class="python"><code>right_notes = right_notes_1 + right_notes_2</code></pre>
<p>In this code, we use the <code>+</code> operator to concatenate the <code>right_notes_1</code> and <code>right_notes_2</code> lists, and store the result in a new list called <code>right_notes</code>. You can then use this <code>right_notes</code> list as the input for the <code>addNote</code> method to add the notes to the MIDI file. This will combine the notes from both verses into one list, which can be used to generate the MIDI file for the entire song.</p>
</div>
</div>
<p>Notice that GPT split each verse in its own variable, which was great for readability but bad for the code because I’m a dummy who doesn’t know python.
I could’ve googled how to concatenate lists in python, but I for this experiment I wanted to do as much as I could with GPT alone.</p>
<p>At I’m writing this post I realise that GPT actually made a mistake.
<code>right_notes_2</code> has 64 elements, which corresponds to 8 bars when played with eighths.
But then <code>right_durations_2</code> has 128 elements with value 0.25 (sixteenth notes) instead of 64 elements with value of 0.5.
Re-reading GPT’s description, which mentioned using sixteenths, it seems that GPT actually didn’t add enough notes in the arpeggios.
There are two was to fix it: duplicate every row in <code>right_notes_2</code> or change <code>right_durations_2</code> to be eighths.
I’ll fix it by using eighths because it sounds much better to my ears. <a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></p>
<p>Anyway, here’s the funky new song by GPT (ft. me).</p>
<div class='audio-container'>

<audio controls>
<source src="../../../../post/gptsong/song3.mp3" type="audio/mpeg">
<p>Your browser does not support the audio element.</p>
</audio>
</div>
</div>
</div>
</div>
<div id="coda" class="section level2">
<h2>Coda</h2>
<p>As a final part of the conversation I wanted to probe GPT for next steps forward and also get a title for this post.
Here’s the rest of the conversation.</p>
<div class="conversation">
<div class="question">
<p>Great. I will share this song with my friends.</p>
</div>
<div class="answer">
<p>I’m glad to hear that! I hope your friends enjoy the song. Let me know if you need any further assistance.</p>
</div>
<div class="question">
<p>Yes, I think there’s still things to improve in our program. Can you suggest 5 things to change in our code to make it better in order or more to least important?</p>
</div>
<div class="answer">
<p>Sure, here are 5 suggestions to improve the code we have been working on:</p>
<ol style="list-style-type: decimal">
<li><p>Use a class to organize the code and make it more modular and reusable. Instead of using global variables and functions, we can define a Song class that has attributes and methods to represent the data and operations for the song. This will allow us to create multiple songs and manipulate them independently, as well as make the code easier to understand and maintain.</p></li>
<li><p>Handle errors and exceptions gracefully. Currently, the code does not handle any errors or exceptions that may occur during execution. For example, if the song.py file does not exist or if the decode_instrument function fails to decode a valid instrument, the code will crash and produce an error message. To improve the code, we can add try-except blocks to catch and handle common errors and exceptions, and provide useful feedback and instructions to the user.</p></li>
<li><p>Use more descriptive and meaningful variable names. Some of the variable names used in the code are not very descriptive or meaningful, which can make it difficult to understand the code. For example, the midi variable is used to represent the MIDI file object, but this does not provide much information about its purpose or contents. To improve the code, we can use more descriptive and meaningful variable names that accurately reflect their purpose and contents. For example, we can use midi_file instead of midi to represent the MIDI file object.</p></li>
<li><p>Use standard Python formatting and style conventions. The code currently uses a mix of different formatting and style conventions, which can make it difficult to read and understand. For example, the indentation is not consistent, some lines are too long, and some variable names are not written in snake_case. To improve the code, we can follow the standard Python formatting and style conventions, such as using 4 spaces for indentation, splitting long lines into multiple lines, and using snake_case for variable names. This will make the code more readable and consistent, and improve its overall quality.</p></li>
<li><p>Add more comments and documentation to the code. The code currently has very few comments and no documentation, which can make it difficult to understand and use. For example, it is not clear what the decode_instrument function does, or how to use the addNote method to add a note to the MIDI file. To improve the code, we can add more comments and documentation to explain the purpose and usage of each component of the code. This will make it easier for other people to understand and use the code, and improve its overall maintainability and reliability.`</p></li>
</ol>
</div>
<div class="question">
<p>Good suggestions. We might work on these in our next session, but now it’s getting late.</p>
</div>
<div class="answer">
<p>Sure, we can work on these improvements in our next session. In the meantime, I hope you have a good rest and I look forward to our next session. Let me know if you have any further questions or need any assistance. Have a great day!</p>
</div>
<div class="question">
<p>Thanks. Just to finish, can you summarise what we did in this session?</p>
</div>
<div class="answer">
<p>In this session, we created a Python program that generates a MIDI file with a simple tune using a for loop to add each note. The program allows each note to have a different duration and volume, and it uses a function to decode the instrument from a string. We also discussed some suggestions to improve the code and make it more modular, error-resistant, readable, and documented. Finally, we discussed a possible second verse for the song, and provided the code for the right hand part of both verses.</p>
</div>
<div class="question">
<p>I want to write a blog post publishing this conversation and adding my comments. Can you suggests 5 possible titles? I want something somewhat funny, puns are particularly appreciated but not necessary.</p>
</div>
<div class="answer">
<p>Sure, here are 5 possible titles for the blog post that incorporate some humour or puns:</p>
<ol style="list-style-type: decimal">
<li>“AI-generated tunes: the MIDI-nightmare that’s taking over the music world”</li>
<li>“Pythoning a MIDI masterpiece: how AI is changing the way we create music”</li>
<li>“MIDI madness: the AI-powered tunes that will make you laugh, cry, and dance”</li>
<li>“AI, MIDI, and you: the future of music is here, and it’s hilarious”</li>
<li>“Python and MIDI: the perfect duo for creating the craziest tunes you’ve ever heard”</li>
</ol>
<p>These titles are meant to be humorous and playful, and incorporate some puns related to the topic of the blog post. You can choose the one that you like the most or modify them to better fit your needs and preferences.</p>
</div>
<div class="question">
<p>Those are great. Can you suggest 5 more with ChatGPT in the title.</p>
</div>
<div class="answer">
<p>Sure, here are 5 more possible titles for the blog post that incorporate the term “ChatGPT”:</p>
<ol style="list-style-type: decimal">
<li>“ChatGPT: the AI chatbot that helps you write MIDI tunes”</li>
<li>“Creating music with ChatGPT: a step-by-step guide to MIDI madness”</li>
<li>“ChatGPT and MIDI: the perfect combination for making the craziest tunes”</li>
<li>“ChatGPT’s MIDI masterpieces: how AI is changing the way we create music”</li>
<li>“ChatGPT’s MIDI magic: the AI chatbot that will make you dance and sing”</li>
</ol>
<p>These titles all incorporate the term “ChatGPT” and highlight its role in creating MIDI tunes. You can choose the one that you like the most or modify them to better fit your needs and preferences.</p>
</div>
<div class="question">
<p>Can you create 10 titles combining these 5 with the previous 5?</p>
</div>
<div class="answer">
<p>Sure, here are 10 possible titles that combine the previous 5 titles with the 5 new titles:</p>
<ol style="list-style-type: decimal">
<li>“AI-generated tunes with ChatGPT: the MIDI-nightmare that’s taking over the music world”</li>
<li>“Pythoning a MIDI masterpiece with ChatGPT: how AI is changing the way we create music”</li>
<li>“MIDI madness with ChatGPT: the AI-powered tunes that will make you laugh, cry, and dance”</li>
<li>“AI, MIDI, and ChatGPT: the future of music is here, and it’s hilarious”</li>
<li>“Python, MIDI, and ChatGPT: the perfect trio for creating the craziest tunes you’ve ever heard”</li>
<li>“ChatGPT: the AI chatbot that helps you write MIDI tunes like a pro”</li>
<li>“Creating music with ChatGPT and MIDI: a step-by-step guide to MIDI madness”</li>
<li>“ChatGPT and MIDI: the perfect combination for making the wildest, wackiest tunes”</li>
<li>“ChatGPT’s MIDI masterpieces: how AI is revolutionizing the way we create music”</li>
<li>“ChatGPT’s MIDI magic: the AI chatbot that will make your feet move and your heart sing”</li>
</ol>
<p>These titles incorporate the previous 5 titles and the new 5 titles, and highlight the role of ChatGPT in creating MIDI tunes. You can choose the one that you like the most or modify them to better fit your needs and preferences.</p>
</div>
</div>
<style>

.audio-container {
   margin: 2rem 0 0 0;
   display: flex;
   justify-content: center;
   align-items: center;
}

.conversation {
   margin: 1rem 3rem 0 3rem;
}
.question {
   background-color: #F7F7F8;
   padding: 0.5rem 2rem 0.5rem 2rem;   
   font-weight: bold;
   border-bottom: 1px solid rgba(0,0,0,.1);

}

.answer {
   background-color: #F7F7F8;
   padding: 0.5rem 2rem 0.5rem 4rem;
   border-bottom: 1px solid rgba(0,0,0,.1);
}


</style>
</div>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p>I think that the reason it’s become so popular has less to do with the technical details and more with the fact that is free to use with no token restrictions.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>Writing about music in English is ugly as hell. In Spanish notes and durations have cool, interesting names like “<em>corcheas</em>” instead of “eighths” and Do, Re, Mi, Fa, Sol, La, Si instead of C, D, E, F, G, A, B. I guess the English nomenclature is more clear and doesn’t require you to memorise names, but still, ugly and boring.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../../en/2023/02/dataset-functions/" data-tooltip="Making data available with dataset functions">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../../en/2021/09/contour-labels/" data-tooltip="Labeling contour lines in R with ggplot2, metR and isoband">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/en/2022/12/chatpgt-midi-music/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/en/2022/12/chatpgt-midi-music/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=/en/2022/12/chatpgt-midi-music/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2024 Elio Campitelli. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="2">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../../en/2023/02/dataset-functions/" data-tooltip="Making data available with dataset functions">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="../../../../en/2021/09/contour-labels/" data-tooltip="Labeling contour lines in R with ggplot2, metR and isoband">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/en/2022/12/chatpgt-midi-music/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/en/2022/12/chatpgt-midi-music/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=/en/2022/12/chatpgt-midi-music/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="2">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=%2Fen%2F2022%2F12%2Fchatpgt-midi-music%2F">
          <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=%2Fen%2F2022%2F12%2Fchatpgt-midi-music%2F">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=%2Fen%2F2022%2F12%2Fchatpgt-midi-music%2F">
          <i class="fa fa-google-plus"></i><span>Share on Google&#43;</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="//www.gravatar.com/avatar/2376976935665241d1fd5a1fb8124a81?s=110" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Elio Campitelli</h4>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Atmospheric sciences graduate researcher at CONICET
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Argentina
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="Search" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center">no post found</div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../../en/2024/07/rcdo-climate-data-operators-in-r.en/">
                <h3 class="media-heading">A wrapper for the Climate Data Operators in R</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2024
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Today I’m extremely happy because I’ve finally been able to fulfil a dream of mine. And yes, by the end of this blogpost you might be worried about me for having such a weird, niche and, frankly, dumb dream, but I swear I’m fine!
My dream was to create an R wrapper for the Climate Data Operators (CDO) automatically from its documentation.
CDO is a command-line utility that provides a plethora of functionality common to climate science.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../../en/2023/11/kriging-metr-r/">
                <h3 class="media-heading">Kriging with metR</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2023
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Say you have data measured at different weather stations, which in Argentina might look something like this
estaciones[data, on = c(&quot;nombre&quot; = &quot;station&quot;)] |&gt; ggplot(aes(lon, lat)) + geom_point(aes(color = t)) + geom_sf(data = argentina_provincias, inherit.aes = FALSE, fill = NA) + scale_color_viridis_c() Because this is not a regular grid, it’s not possible to visualise this data with contours as is. Instead, it’s necessary to interpolate it into a regular grid.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../../en/2023/10/dependencies-in-r/">
                <h3 class="media-heading">Taking dependencies is actually good</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2023
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">One of the recurring debates in some spaces of the R community is about dependencies. After a few posts on Mastodon I wanted to capture my opinions on the subject to help me understand them better, and because long-form articles are much better to talk about contentious topics than short-burst posts.
Dependencies are invitations for other people to collaborate with you Many thinkers have marvelled at the magic inside books.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../../en/2023/04/knitr-rmarkdown-tricks/">
                <h3 class="media-heading">11 tricks to level up your rmarkdown documents</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2023
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">For a while I wanted to write a post to compile some of the tricks I’ve learnt over the years of using rmarkdown. I also wanted other people’s input so I asked for suggestions on Mastodon. So here are the 11 tips I decided to include in no particular order.
Make chunk options non-optional I use this trick to force myself to write captions to all figures:
knit_plot &lt;- knitr::knit_hooks$get(&quot;plot&quot;) knitr::knit_hooks$set(plot = function(x, options) { if (is.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../../en/2023/02/dataset-functions/">
                <h3 class="media-heading">Making data available with dataset functions</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Feb 2, 2023
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">An important part of a scientific project, such as a journal paper or a PhD thesis, is accessing datasets. To keep things reproducible datasets should be accessible, either provided in the repository itself or in a remote location. Also for reproducibility, it’s important to be able to check if the data you get is the same as the data you expect.
I wanted to share my technique for downloading and accessing datasets that strives for maximum reproducibility and user-friendliness.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../../en/2022/12/chatpgt-midi-music/">
                <h3 class="media-heading">MIDI madness with ChatGPT: the AI-powered tunes that will make you laugh, cry, and dance</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Dec 12, 2022
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">ChatGPT seems to be taking the world by storm. This is version of the GPT3 language model which is somehow optimised for chat dominates my Mastodon feed and inspired countless articles and discussion. 1
A decent chunk of the discourse has been about how the outputs of the models sound very plausible and even authoritative but lack any connection with reality because the model is train to mimic language, not to give truth.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../../en/2021/09/contour-labels/">
                <h3 class="media-heading">Labeling contour lines in R with ggplot2, metR and isoband</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2021
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">I started to use R full time for my research about 5 years ago when I started working on my Masters’ thesis and up until today there was one thing missing: proper contour labels. Now, thanks to the wonderful isoband package, I finally got what I wished for and it’s bundled in the latest release of metR.
So let’s set up the stage for the problem. I have a 2D field that I want to visualise as a contour map.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../../en/2021/08/docker-renv/">
                <h3 class="media-heading">Setting up a transparent reproducible R environment with Docker &#43; renv</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Aug 8, 2021
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">For my PhD I’m currently writing a paper using rmarkdown. Since I care about reproducibility, I’m using renv to register the versions of the R packages I use and to manage a local library that doesn’t affect the rest of my system. With that, anyone who wants to reproduce my work could download all the code, run renv::restore() and have an R environment very similar to the one I use.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../../en/2021/07/wrapper-stop/">
                <h3 class="media-heading">Make error messages your own</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2021
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">The stop() function allows you to terminate the execution of a function if there is a fatal problem.
For example, imagine this code that calculates the square root of a number but only if the input number is positive.
real_root &lt;- function(x) { if (x &lt; 0) { stop(&quot;&#39;x&#39; cannot be negative.&quot;) } sqrt(x) } real_root(2) ## [1] 1.414214 real_root(-2) ## Error in real_root(-2): &#39;x&#39; cannot be negative. If x is negative, the function throws an error.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="../../../../en/2021/05/r-pipa-nativa/">
                <h3 class="media-heading">The new R pipe</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2021
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">R 4.1.0 is out! And if version 4.0.0 made history with the revolutionary change of stringAsFactors = FALSE, the big splashing news in this next version is the implementation of a native pipe.
The new pipe The “pipe” is one of the most distinctive qualities of tidyverse/dplyr code. I’m sure you’ve used or seen something like this:
library(dplyr) mtcars %&gt;% group_by(cyl) %&gt;% summarise(mpg = mean(mpg))  ## # A tibble: 3 x 2 ## cyl mpg ## &lt;dbl&gt; &lt;dbl&gt; ## 1 4 26.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero="no post found"
         data-message-one="1 post found"
         data-message-other="{n} posts found">
         19 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('https://github.com/eliocamp/codigo-r/raw/master/static/images/cover2.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js" integrity="sha256-XrZQp+ZMfovqr6Hb2M6okHvSEYaB/+Xbx7toWmOOZUM=" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-light.min.css" integrity="sha256-KacbO6Nou2geGJEUzQeKzKEdp/DENVGJKAd2v37moh0=" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="../../../../js/script-qi9wbxp2ya2j6p7wx1i6tgavftewndznf4v0hy2gvivk1rxgc3lm7njqb6bz.min.js"></script>



<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
      <script>
        var disqus_config = function () {
          this.page.url = '\/en\/2022\/12\/chatpgt-midi-music\/';
          
            this.page.identifier = '\/en\/2022\/12\/chatpgt-midi-music\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'codigo-r';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  



    
  </body>
</html>

